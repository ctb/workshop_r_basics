<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>2 Data Structures | R Basics</title>
  <meta name="description" content="2 Data Structures | R Basics" />
  <meta name="generator" content="bookdown 0.21 and GitBook 2.6.7" />

  <meta property="og:title" content="2 Data Structures | R Basics" />
  <meta property="og:type" content="book" />
  <meta property="og:url" content="https://ucdavisdatalab.github.io/workshop_r_basics/" />
  
  
  <meta name="github-repo" content="ucdavisdatalab/workshop_r-basics" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="2 Data Structures | R Basics" />
  
  
  

<meta name="author" content="Nick Ulle" />


<meta name="date" content="2021-05-27" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="getting-started.html"/>
<link rel="next" href="exploring-your-data.html"/>
<script src="libs/header-attrs-2.6/header-attrs.js"></script>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="https://datalab.ucdavis.edu/">
  <img src="https://datalab.ucdavis.edu/wp-content/uploads/2019/07/datalab-logo-full-color-rgb-1.png" style="height: 100%; width: 100%; object-fit: contain" />
</a></li>
<li><a href="./" style="font-size: 18px">R Basics</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Overview</a></li>
<li class="chapter" data-level="1" data-path="getting-started.html"><a href="getting-started.html"><i class="fa fa-check"></i><b>1</b> Getting Started</a>
<ul>
<li class="chapter" data-level="1.1" data-path="getting-started.html"><a href="getting-started.html#prerequisites"><i class="fa fa-check"></i><b>1.1</b> Prerequisites</a></li>
<li class="chapter" data-level="1.2" data-path="getting-started.html"><a href="getting-started.html#the-r-interface"><i class="fa fa-check"></i><b>1.2</b> The R Interface</a>
<ul>
<li class="chapter" data-level="1.2.1" data-path="getting-started.html"><a href="getting-started.html#variables"><i class="fa fa-check"></i><b>1.2.1</b> Variables</a></li>
<li class="chapter" data-level="1.2.2" data-path="getting-started.html"><a href="getting-started.html#calling-functions"><i class="fa fa-check"></i><b>1.2.2</b> Calling Functions</a></li>
</ul></li>
<li class="chapter" data-level="1.3" data-path="getting-started.html"><a href="getting-started.html#getting-help"><i class="fa fa-check"></i><b>1.3</b> Getting Help</a>
<ul>
<li class="chapter" data-level="1.3.1" data-path="getting-started.html"><a href="getting-started.html#when-something-goes-wrong"><i class="fa fa-check"></i><b>1.3.1</b> When Something Goes Wrong</a></li>
</ul></li>
<li class="chapter" data-level="1.4" data-path="getting-started.html"><a href="getting-started.html#file-systems"><i class="fa fa-check"></i><b>1.4</b> File Systems</a>
<ul>
<li class="chapter" data-level="1.4.1" data-path="getting-started.html"><a href="getting-started.html#absolute-relative-paths"><i class="fa fa-check"></i><b>1.4.1</b> Absolute &amp; Relative Paths</a></li>
<li class="chapter" data-level="1.4.2" data-path="getting-started.html"><a href="getting-started.html#r-scripts"><i class="fa fa-check"></i><b>1.4.2</b> R Scripts</a></li>
<li class="chapter" data-level="1.4.3" data-path="getting-started.html"><a href="getting-started.html#the-working-directory"><i class="fa fa-check"></i><b>1.4.3</b> The Working Directory</a></li>
</ul></li>
<li class="chapter" data-level="1.5" data-path="getting-started.html"><a href="getting-started.html#reading-files"><i class="fa fa-check"></i><b>1.5</b> Reading Files</a>
<ul>
<li class="chapter" data-level="1.5.1" data-path="getting-started.html"><a href="getting-started.html#hello-data"><i class="fa fa-check"></i><b>1.5.1</b> Hello, Data!</a></li>
</ul></li>
<li class="chapter" data-level="1.6" data-path="getting-started.html"><a href="getting-started.html#data-frames"><i class="fa fa-check"></i><b>1.6</b> Data Frames</a>
<ul>
<li class="chapter" data-level="1.6.1" data-path="getting-started.html"><a href="getting-started.html#summarizing-data"><i class="fa fa-check"></i><b>1.6.1</b> Summarizing Data</a></li>
<li class="chapter" data-level="1.6.2" data-path="getting-started.html"><a href="getting-started.html#selecting-columns"><i class="fa fa-check"></i><b>1.6.2</b> Selecting Columns</a></li>
</ul></li>
<li class="chapter" data-level="1.7" data-path="getting-started.html"><a href="getting-started.html#vectors"><i class="fa fa-check"></i><b>1.7</b> Vectors</a>
<ul>
<li class="chapter" data-level="1.7.1" data-path="getting-started.html"><a href="getting-started.html#creating-vectors"><i class="fa fa-check"></i><b>1.7.1</b> Creating Vectors</a></li>
<li class="chapter" data-level="1.7.2" data-path="getting-started.html"><a href="getting-started.html#indexing-vectors"><i class="fa fa-check"></i><b>1.7.2</b> Indexing Vectors</a></li>
<li class="chapter" data-level="1.7.3" data-path="getting-started.html"><a href="getting-started.html#vectorization"><i class="fa fa-check"></i><b>1.7.3</b> Vectorization</a></li>
<li class="chapter" data-level="1.7.4" data-path="getting-started.html"><a href="getting-started.html#recycling"><i class="fa fa-check"></i><b>1.7.4</b> Recycling</a></li>
<li class="chapter" data-level="1.7.5" data-path="getting-started.html"><a href="getting-started.html#making-comparisons"><i class="fa fa-check"></i><b>1.7.5</b> Making Comparisons</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="data-structures.html"><a href="data-structures.html"><i class="fa fa-check"></i><b>2</b> Data Structures</a>
<ul>
<li class="chapter" data-level="2.1" data-path="data-structures.html"><a href="data-structures.html#data-types-classes"><i class="fa fa-check"></i><b>2.1</b> Data Types &amp; Classes</a>
<ul>
<li class="chapter" data-level="2.1.1" data-path="data-structures.html"><a href="data-structures.html#lists"><i class="fa fa-check"></i><b>2.1.1</b> Lists</a></li>
<li class="chapter" data-level="2.1.2" data-path="data-structures.html"><a href="data-structures.html#implicit-coercion"><i class="fa fa-check"></i><b>2.1.2</b> Implicit Coercion</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="data-structures.html"><a href="data-structures.html#special-values"><i class="fa fa-check"></i><b>2.2</b> Special Values</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="data-structures.html"><a href="data-structures.html#missing-values"><i class="fa fa-check"></i><b>2.2.1</b> Missing Values</a></li>
<li class="chapter" data-level="2.2.2" data-path="data-structures.html"><a href="data-structures.html#infinity"><i class="fa fa-check"></i><b>2.2.2</b> Infinity</a></li>
<li class="chapter" data-level="2.2.3" data-path="data-structures.html"><a href="data-structures.html#not-a-number"><i class="fa fa-check"></i><b>2.2.3</b> Not a Number</a></li>
<li class="chapter" data-level="2.2.4" data-path="data-structures.html"><a href="data-structures.html#null"><i class="fa fa-check"></i><b>2.2.4</b> Null</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="data-structures.html"><a href="data-structures.html#matrices-arrays"><i class="fa fa-check"></i><b>2.3</b> Matrices &amp; Arrays</a></li>
<li class="chapter" data-level="2.4" data-path="data-structures.html"><a href="data-structures.html#factors"><i class="fa fa-check"></i><b>2.4</b> Factors</a></li>
<li class="chapter" data-level="2.5" data-path="data-structures.html"><a href="data-structures.html#indexing"><i class="fa fa-check"></i><b>2.5</b> Indexing</a>
<ul>
<li class="chapter" data-level="2.5.1" data-path="data-structures.html"><a href="data-structures.html#all-elements"><i class="fa fa-check"></i><b>2.5.1</b> All Elements</a></li>
<li class="chapter" data-level="2.5.2" data-path="data-structures.html"><a href="data-structures.html#by-position"><i class="fa fa-check"></i><b>2.5.2</b> By Position</a></li>
<li class="chapter" data-level="2.5.3" data-path="data-structures.html"><a href="data-structures.html#by-name"><i class="fa fa-check"></i><b>2.5.3</b> By Name</a></li>
<li class="chapter" data-level="2.5.4" data-path="data-structures.html"><a href="data-structures.html#by-condition"><i class="fa fa-check"></i><b>2.5.4</b> By Condition</a></li>
<li class="chapter" data-level="2.5.5" data-path="data-structures.html"><a href="data-structures.html#logic"><i class="fa fa-check"></i><b>2.5.5</b> Logic</a></li>
<li class="chapter" data-level="2.5.6" data-path="data-structures.html"><a href="data-structures.html#indexing-lists"><i class="fa fa-check"></i><b>2.5.6</b> Indexing Lists</a></li>
<li class="chapter" data-level="2.5.7" data-path="data-structures.html"><a href="data-structures.html#indexing-data-frames"><i class="fa fa-check"></i><b>2.5.7</b> Indexing Data Frames</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="exploring-your-data.html"><a href="exploring-your-data.html"><i class="fa fa-check"></i><b>3</b> Exploring Your Data</a>
<ul>
<li class="chapter" data-level="3.1" data-path="exploring-your-data.html"><a href="exploring-your-data.html#apply-functions"><i class="fa fa-check"></i><b>3.1</b> Apply Functions</a>
<ul>
<li class="chapter" data-level="3.1.1" data-path="exploring-your-data.html"><a href="exploring-your-data.html#the-sapply-function"><i class="fa fa-check"></i><b>3.1.1</b> The <code>sapply</code> Function</a></li>
<li class="chapter" data-level="3.1.2" data-path="exploring-your-data.html"><a href="exploring-your-data.html#the-split-apply-pattern"><i class="fa fa-check"></i><b>3.1.2</b> The Split-Apply Pattern</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="exploring-your-data.html"><a href="exploring-your-data.html#conditional-expressions"><i class="fa fa-check"></i><b>3.2</b> Conditional Expressions</a></li>
<li class="chapter" data-level="3.3" data-path="exploring-your-data.html"><a href="exploring-your-data.html#functions"><i class="fa fa-check"></i><b>3.3</b> Functions</a>
<ul>
<li class="chapter" data-level="3.3.1" data-path="exploring-your-data.html"><a href="exploring-your-data.html#returning-values"><i class="fa fa-check"></i><b>3.3.1</b> Returning Values</a></li>
<li class="chapter" data-level="3.3.2" data-path="exploring-your-data.html"><a href="exploring-your-data.html#planning-your-functions"><i class="fa fa-check"></i><b>3.3.2</b> Planning Your Functions</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="exploring-your-data.html"><a href="exploring-your-data.html#variable-scope-lookup"><i class="fa fa-check"></i><b>3.4</b> Variable Scope &amp; Lookup</a>
<ul>
<li class="chapter" data-level="3.4.1" data-path="exploring-your-data.html"><a href="exploring-your-data.html#local-variables"><i class="fa fa-check"></i><b>3.4.1</b> Local Variables</a></li>
<li class="chapter" data-level="3.4.2" data-path="exploring-your-data.html"><a href="exploring-your-data.html#lexical-scoping"><i class="fa fa-check"></i><b>3.4.2</b> Lexical Scoping</a></li>
<li class="chapter" data-level="3.4.3" data-path="exploring-your-data.html"><a href="exploring-your-data.html#dynamic-lookup"><i class="fa fa-check"></i><b>3.4.3</b> Dynamic Lookup</a></li>
<li class="chapter" data-level="3.4.4" data-path="exploring-your-data.html"><a href="exploring-your-data.html#summary"><i class="fa fa-check"></i><b>3.4.4</b> Summary</a></li>
</ul></li>
<li class="chapter" data-level="3.5" data-path="exploring-your-data.html"><a href="exploring-your-data.html#packages"><i class="fa fa-check"></i><b>3.5</b> Packages</a></li>
<li class="chapter" data-level="3.6" data-path="exploring-your-data.html"><a href="exploring-your-data.html#data-visualization"><i class="fa fa-check"></i><b>3.6</b> Data Visualization</a>
<ul>
<li class="chapter" data-level="3.6.1" data-path="exploring-your-data.html"><a href="exploring-your-data.html#layer-1-data"><i class="fa fa-check"></i><b>3.6.1</b> Layer 1: Data</a></li>
<li class="chapter" data-level="3.6.2" data-path="exploring-your-data.html"><a href="exploring-your-data.html#layer-2-geometry"><i class="fa fa-check"></i><b>3.6.2</b> Layer 2: Geometry</a></li>
<li class="chapter" data-level="3.6.3" data-path="exploring-your-data.html"><a href="exploring-your-data.html#layer-3-aesthetics"><i class="fa fa-check"></i><b>3.6.3</b> Layer 3: Aesthetics</a></li>
<li class="chapter" data-level="3.6.4" data-path="exploring-your-data.html"><a href="exploring-your-data.html#layer-4-scales"><i class="fa fa-check"></i><b>3.6.4</b> Layer 4: Scales</a></li>
<li class="chapter" data-level="3.6.5" data-path="exploring-your-data.html"><a href="exploring-your-data.html#saving-plots"><i class="fa fa-check"></i><b>3.6.5</b> Saving Plots</a></li>
<li class="chapter" data-level="3.6.6" data-path="exploring-your-data.html"><a href="exploring-your-data.html#example-bar-plot"><i class="fa fa-check"></i><b>3.6.6</b> Example: Bar Plot</a></li>
<li class="chapter" data-level="3.6.7" data-path="exploring-your-data.html"><a href="exploring-your-data.html#visualization-design"><i class="fa fa-check"></i><b>3.6.7</b> Visualization Design</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="cleaning-messy-data.html"><a href="cleaning-messy-data.html"><i class="fa fa-check"></i><b>4</b> Cleaning Messy Data</a>
<ul>
<li class="chapter" data-level="4.1" data-path="cleaning-messy-data.html"><a href="cleaning-messy-data.html#loops"><i class="fa fa-check"></i><b>4.1</b> Loops</a>
<ul>
<li class="chapter" data-level="4.1.1" data-path="cleaning-messy-data.html"><a href="cleaning-messy-data.html#for-loops"><i class="fa fa-check"></i><b>4.1.1</b> For-loops</a></li>
<li class="chapter" data-level="4.1.2" data-path="cleaning-messy-data.html"><a href="cleaning-messy-data.html#while-loops"><i class="fa fa-check"></i><b>4.1.2</b> While-loops</a></li>
<li class="chapter" data-level="4.1.3" data-path="cleaning-messy-data.html"><a href="cleaning-messy-data.html#saving-multiple-results"><i class="fa fa-check"></i><b>4.1.3</b> Saving Multiple Results</a></li>
<li class="chapter" data-level="4.1.4" data-path="cleaning-messy-data.html"><a href="cleaning-messy-data.html#break-next"><i class="fa fa-check"></i><b>4.1.4</b> Break &amp; Next</a></li>
<li class="chapter" data-level="4.1.5" data-path="cleaning-messy-data.html"><a href="cleaning-messy-data.html#example-fibonacci"><i class="fa fa-check"></i><b>4.1.5</b> Example: Fibonacci</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="cleaning-messy-data.html"><a href="cleaning-messy-data.html#planning-for-iteration"><i class="fa fa-check"></i><b>4.2</b> Planning for Iteration</a></li>
<li class="chapter" data-level="4.3" data-path="cleaning-messy-data.html"><a href="cleaning-messy-data.html#string-processing"><i class="fa fa-check"></i><b>4.3</b> String Processing</a>
<ul>
<li class="chapter" data-level="4.3.1" data-path="cleaning-messy-data.html"><a href="cleaning-messy-data.html#splitting-strings"><i class="fa fa-check"></i><b>4.3.1</b> Splitting Strings</a></li>
<li class="chapter" data-level="4.3.2" data-path="cleaning-messy-data.html"><a href="cleaning-messy-data.html#replacing-parts-of-strings"><i class="fa fa-check"></i><b>4.3.2</b> Replacing Parts of Strings</a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="cleaning-messy-data.html"><a href="cleaning-messy-data.html#date-processing"><i class="fa fa-check"></i><b>4.4</b> Date Processing</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="where-to-learn-more.html"><a href="where-to-learn-more.html"><i class="fa fa-check"></i>Where to Learn More</a></li>
<li class="chapter" data-level="" data-path="acknowledgements.html"><a href="acknowledgements.html"><i class="fa fa-check"></i>Acknowledgements</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">R Basics</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="data-structures" class="section level1" number="2">
<h1><span class="header-section-number">2</span> Data Structures</h1>
<p>The previous chapter introduced R and gave you enough background to do some
simple computations on data sets. This chapter focuses on the foundational
knowledge and skills you’ll need in order to use R effectively in the long
term. Specifically, we’re going to take a deep dive into R’s various data
structures, then learn a variety of ways to get and set their elements.</p>
<div id="data-types-classes" class="section level2" number="2.1">
<h2><span class="header-section-number">2.1</span> Data Types &amp; Classes</h2>
<p>Data can be categorized into different <em>types</em> based on sets of shared
characteristics. For instance, statisticians tend to think about whether data
are numeric or categorical:</p>
<ul>
<li>numeric
<ul>
<li>continuous (real or complex numbers)</li>
<li>discrete (integers)</li>
</ul></li>
<li>categorical
<ul>
<li>nominal (categories with no ordering)</li>
<li>ordinal (categories with some ordering)</li>
</ul></li>
</ul>
<p>Of course, other types of data, like graphs (networks) and natural language
(books, speech, and so on), are also possible. Categorizing data this way is
useful for reasoning about which methods to apply to which data.</p>
<p>In R, data objects are categorized in two different ways:</p>
<ol style="list-style-type: decimal">
<li><p>The <em>class</em> of an R object describes what the object does, or the role that
it plays. Sometimes objects can do more than one thing, so objects can have
more than one class. The <code>class</code> function, which debuted in Section
<a href="getting-started.html#data-frames">1.6</a>, returns the classes of its argument.</p></li>
<li><p>The <em>type</em> of an R object describes what the object is. Technically, the
type corresponds to how the object is stored in your computer’s memory. Each
object has exactly one type. The <code>typeof</code> function returns the type of its
argument.</p></li>
</ol>
<p>Of the two, classes tend to be more important than types. If you aren’t sure
what an object is, checking its classes should be the first thing you do.</p>
<p>The built-in classes you’ll use all the time correspond to vectors and lists
(which we’ll learn more about in Section <a href="data-structures.html#lists">2.1.1</a>):</p>
<table>
<thead>
<tr class="header">
<th align="left">Class</th>
<th align="left">Example</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">logical</td>
<td align="left"><code>TRUE</code>, <code>FALSE</code></td>
<td align="left">Logical (or Boolean) values</td>
</tr>
<tr class="even">
<td align="left">integer</td>
<td align="left"><code>-1L</code>, <code>1L</code>, <code>2L</code></td>
<td align="left">Integer numbers</td>
</tr>
<tr class="odd">
<td align="left">numeric</td>
<td align="left"><code>-2.1</code>, <code>7</code>, <code>34.2</code></td>
<td align="left">Real numbers</td>
</tr>
<tr class="even">
<td align="left">complex</td>
<td align="left"><code>3-2i</code>, <code>-8+0i</code></td>
<td align="left">Complex numbers</td>
</tr>
<tr class="odd">
<td align="left">character</td>
<td align="left"><code>"hi"</code>, <code>"YAY"</code></td>
<td align="left">Text strings</td>
</tr>
<tr class="even">
<td align="left">list</td>
<td align="left"><code>list(TRUE, 1, "hi")</code></td>
<td align="left">Ordered collection of heterogeneous elements</td>
</tr>
</tbody>
</table>
<p>R doesn’t distinguish between scalars and vectors (see Section <a href="getting-started.html#vectors">1.7</a>),
so the class of a vector is the same as the class of its elements:</p>
<div class="sourceCode" id="cb154"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb154-1"><a href="data-structures.html#cb154-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(<span class="st">&quot;hi&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;character&quot;</code></pre>
<div class="sourceCode" id="cb156"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb156-1"><a href="data-structures.html#cb156-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(<span class="fu">c</span>(<span class="st">&quot;hello&quot;</span>, <span class="st">&quot;hi&quot;</span>))</span></code></pre></div>
<pre><code>## [1] &quot;character&quot;</code></pre>
<p>In addition, for ordinary vectors, the class and the type are the same:</p>
<div class="sourceCode" id="cb158"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb158-1"><a href="data-structures.html#cb158-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">=</span> <span class="fu">c</span>(<span class="cn">TRUE</span>, <span class="cn">FALSE</span>)</span>
<span id="cb158-2"><a href="data-structures.html#cb158-2" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(x)</span></code></pre></div>
<pre><code>## [1] &quot;logical&quot;</code></pre>
<div class="sourceCode" id="cb160"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb160-1"><a href="data-structures.html#cb160-1" aria-hidden="true" tabindex="-1"></a><span class="fu">typeof</span>(x)</span></code></pre></div>
<pre><code>## [1] &quot;logical&quot;</code></pre>
<p>The exception to this rule is numeric vectors, which have type <code>double</code> for
historical reasons:</p>
<div class="sourceCode" id="cb162"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb162-1"><a href="data-structures.html#cb162-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(pi)</span></code></pre></div>
<pre><code>## [1] &quot;numeric&quot;</code></pre>
<div class="sourceCode" id="cb164"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb164-1"><a href="data-structures.html#cb164-1" aria-hidden="true" tabindex="-1"></a><span class="fu">typeof</span>(pi)</span></code></pre></div>
<pre><code>## [1] &quot;double&quot;</code></pre>
<div class="sourceCode" id="cb166"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb166-1"><a href="data-structures.html#cb166-1" aria-hidden="true" tabindex="-1"></a><span class="fu">typeof</span>(<span class="dv">3</span>)</span></code></pre></div>
<pre><code>## [1] &quot;double&quot;</code></pre>
<p>The word “double” here stands for <a href="https://en.wikipedia.org/wiki/Double-precision_floating-point_format"><em>double-precision floating point
number</em></a>, a standard way to represent real numbers on computers.</p>
<p>By default, R assumes any numbers you enter in code are numeric, even if
they’re integer-valued.</p>
<p>The class <code>integer</code> also represents integer numbers, but it’s not used as often
as <code>numeric</code>. A few functions, such as the sequence operator <code>:</code> and the
<code>length</code> function, return integers. You can also force R to create an integer
by adding the suffix <code>L</code> to a number, but there are no major drawbacks to using
the <code>double</code> default:</p>
<div class="sourceCode" id="cb168"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb168-1"><a href="data-structures.html#cb168-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>)</span></code></pre></div>
<pre><code>## [1] &quot;integer&quot;</code></pre>
<div class="sourceCode" id="cb170"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb170-1"><a href="data-structures.html#cb170-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(<span class="dv">3</span>)</span></code></pre></div>
<pre><code>## [1] &quot;numeric&quot;</code></pre>
<div class="sourceCode" id="cb172"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb172-1"><a href="data-structures.html#cb172-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(3L)</span></code></pre></div>
<pre><code>## [1] &quot;integer&quot;</code></pre>
<p>Besides the classes for vectors and lists, there are several built-in classes
that represent more sophisticated data structures:</p>
<table>
<thead>
<tr class="header">
<th align="left">Class</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">function</td>
<td align="left">Functions</td>
</tr>
<tr class="even">
<td align="left">factor</td>
<td align="left">Categorical values</td>
</tr>
<tr class="odd">
<td align="left">matrix</td>
<td align="left">Two-dimensional ordered collection of homogeneous elements</td>
</tr>
<tr class="even">
<td align="left">array</td>
<td align="left">Multi-dimensional ordered collection of homogeneous elements</td>
</tr>
<tr class="odd">
<td align="left">data.frame</td>
<td align="left">Data frames</td>
</tr>
</tbody>
</table>
<p>For these, the class is usually different from the type. We’ll learn more about
most of these later on.</p>
<div id="lists" class="section level3" number="2.1.1">
<h3><span class="header-section-number">2.1.1</span> Lists</h3>
<p>A <em>list</em> is an ordered data structure where the elements can have different
types (they are <em>heterogeneous</em>). This differs from a vector, where the
elements all have to have the same type, as we saw in Section <a href="getting-started.html#vectors">1.7</a>.
The tradeoff is that most vectorized functions do not work with lists.</p>
<p>You can make an ordinary list with the <code>list</code> function:</p>
<div class="sourceCode" id="cb174"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb174-1"><a href="data-structures.html#cb174-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">=</span> <span class="fu">list</span>(<span class="dv">1</span>, <span class="fu">c</span>(<span class="st">&quot;hi&quot;</span>, <span class="st">&quot;bye&quot;</span>))</span>
<span id="cb174-2"><a href="data-structures.html#cb174-2" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(x)</span></code></pre></div>
<pre><code>## [1] &quot;list&quot;</code></pre>
<div class="sourceCode" id="cb176"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb176-1"><a href="data-structures.html#cb176-1" aria-hidden="true" tabindex="-1"></a><span class="fu">typeof</span>(x)</span></code></pre></div>
<pre><code>## [1] &quot;list&quot;</code></pre>
<p>For ordinary lists, the type and the class are both <code>list</code>. In Section
<a href="data-structures.html#indexing">2.5</a>, we’ll learn how to get and set list elements, and in later
sections we’ll learn more about when and why to use lists.</p>
<p>You’ve already seen one list, the earnings data frame:</p>
<div class="sourceCode" id="cb178"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb178-1"><a href="data-structures.html#cb178-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(earn)</span></code></pre></div>
<pre><code>## [1] &quot;data.frame&quot;</code></pre>
<div class="sourceCode" id="cb180"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb180-1"><a href="data-structures.html#cb180-1" aria-hidden="true" tabindex="-1"></a><span class="fu">typeof</span>(earn)</span></code></pre></div>
<pre><code>## [1] &quot;list&quot;</code></pre>
<p>Under the hood, data frames are lists, and each column is a list element.
Because the class is <code>data.frame</code> rather than <code>list</code>, R treats data frames
differently from ordinary lists. This difference is apparent in how data frames
are printed compared to ordinary lists.</p>
</div>
<div id="implicit-coercion" class="section level3" number="2.1.2">
<h3><span class="header-section-number">2.1.2</span> Implicit Coercion</h3>
<p>R’s types fall into a natural hierarchy of expressiveness:</p>
<p><img src="img/types.png"></p>
<p>Each type on the right is more expressive than the ones to its left. That is,
with the convention that <code>FALSE</code> is <code>0</code> and <code>TRUE</code> is <code>1</code>, we can represent any
logical value as an integer. In turn, we can represent any integer as a double,
and any double as a complex number. By writing the number out, we can also
represent any complex number as a string.</p>
<p>The point is that no information is lost as we follow the arrows from left to
right along the types in the hierarchy. In fact, R will automatically and
silently convert from types on the left to types on the right as needed. This
is called <em>implicit coercion</em>.</p>
<p>As an example, consider what happens if we add a logical value to a number:</p>
<div class="sourceCode" id="cb182"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb182-1"><a href="data-structures.html#cb182-1" aria-hidden="true" tabindex="-1"></a><span class="cn">TRUE</span> <span class="sc">+</span> <span class="dv">2</span></span></code></pre></div>
<pre><code>## [1] 3</code></pre>
<p>R automatically converts the <code>TRUE</code> to the numeric value <code>1</code>, and then carries
out the arithmetic as usual.</p>
<p>We’ve already seen implicit coercion at work once before, when we learned the
<code>c</code> function. Since the elements of a vector all have to have the same type, if
you pass several different types to <code>c</code>, then R tries to use implicit coercion
to make them the same:</p>
<div class="sourceCode" id="cb184"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb184-1"><a href="data-structures.html#cb184-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">=</span> <span class="fu">c</span>(<span class="cn">TRUE</span>, <span class="st">&quot;hi&quot;</span>, <span class="dv">1</span>, <span class="dv">1</span><span class="sc">+</span>3i)</span>
<span id="cb184-2"><a href="data-structures.html#cb184-2" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(x)</span></code></pre></div>
<pre><code>## [1] &quot;character&quot;</code></pre>
<div class="sourceCode" id="cb186"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb186-1"><a href="data-structures.html#cb186-1" aria-hidden="true" tabindex="-1"></a>x</span></code></pre></div>
<pre><code>## [1] &quot;TRUE&quot; &quot;hi&quot;   &quot;1&quot;    &quot;1+3i&quot;</code></pre>
<p>Implicit coercion is strictly one-way; it never occurs in the other direction.
If you want to coerce a type on the right to one on the left, you can do it
explicitly with one of the <code>as.TYPE</code> functions. For instance, the <code>as.numeric</code>
(or <code>as.double</code>) function coerces to numeric:</p>
<div class="sourceCode" id="cb188"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb188-1"><a href="data-structures.html#cb188-1" aria-hidden="true" tabindex="-1"></a><span class="fu">as.numeric</span>(<span class="st">&quot;3.1&quot;</span>)</span></code></pre></div>
<pre><code>## [1] 3.1</code></pre>
<p>There are a few types that fall outside of the hierarchy entirely, like
functions. Implicit coercion doesn’t apply to these. If you try to use these
types where it doesn’t make sense to, R generally returns an error:</p>
<div class="sourceCode" id="cb190"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb190-1"><a href="data-structures.html#cb190-1" aria-hidden="true" tabindex="-1"></a>sin <span class="sc">+</span> <span class="dv">3</span></span></code></pre></div>
<pre><code>## Error in sin + 3: non-numeric argument to binary operator</code></pre>
<p>If you try to use these types as elements of a vector, you get back a list
instead:</p>
<div class="sourceCode" id="cb192"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb192-1"><a href="data-structures.html#cb192-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">=</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, sum)</span>
<span id="cb192-2"><a href="data-structures.html#cb192-2" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(x)</span></code></pre></div>
<pre><code>## [1] &quot;list&quot;</code></pre>
<p>Understanding how implicit coercion works will help you avoid bugs, and can
also be a time-saver. For example, we can use implicit coercion to succinctly
count how many elements of a vector satisfy a some condition:</p>
<div class="sourceCode" id="cb194"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb194-1"><a href="data-structures.html#cb194-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">=</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">3</span>, <span class="sc">-</span><span class="dv">1</span>, <span class="dv">10</span>, <span class="sc">-</span><span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">8</span>, <span class="dv">2</span>)</span>
<span id="cb194-2"><a href="data-structures.html#cb194-2" aria-hidden="true" tabindex="-1"></a>condition <span class="ot">=</span> x <span class="sc">&lt;</span> <span class="dv">4</span></span>
<span id="cb194-3"><a href="data-structures.html#cb194-3" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(condition)    <span class="co"># or sum(x &lt; 4)</span></span></code></pre></div>
<pre><code>## [1] 6</code></pre>
<p>If you still don’t quite understand how the code above works, try inspecting
each variable. In general, inspecting each step or variable is a good strategy
for understanding why a piece of code works (or doesn’t work!). Here the
implicit coercion happens in the third line.</p>
</div>
</div>
<div id="special-values" class="section level2" number="2.2">
<h2><span class="header-section-number">2.2</span> Special Values</h2>
<p>R has four <em>special</em> values to represent missing or invalid data.</p>
<div id="missing-values" class="section level3" number="2.2.1">
<h3><span class="header-section-number">2.2.1</span> Missing Values</h3>
<p>The value <code>NA</code>, called the <em>missing value</em>, represents missing entries in a
data set. It’s implied that the entries are missing due to how the data was
collected, although there are exceptions. As an example, imagine the data came
from a survey, and respondents chose not to answer some questions. In the data
set, their answers for those questions can be recorded as <code>NA</code>.</p>
<p>The missing value is a chameleon: it can be a logical, integer, numeric,
complex, or character value. By default, the missing value is logical, and the
other types occur through coercion (<a href="data-structures.html#implicit-coercion">2.1.2</a>):</p>
<div class="sourceCode" id="cb196"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb196-1"><a href="data-structures.html#cb196-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(<span class="cn">NA</span>)</span></code></pre></div>
<pre><code>## [1] &quot;logical&quot;</code></pre>
<div class="sourceCode" id="cb198"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb198-1"><a href="data-structures.html#cb198-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(<span class="fu">c</span>(<span class="dv">1</span>, <span class="cn">NA</span>))</span></code></pre></div>
<pre><code>## [1] &quot;numeric&quot;</code></pre>
<div class="sourceCode" id="cb200"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb200-1"><a href="data-structures.html#cb200-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(<span class="fu">c</span>(<span class="st">&quot;hi&quot;</span>, <span class="cn">NA</span>, <span class="cn">NA</span>))</span></code></pre></div>
<pre><code>## [1] &quot;character&quot;</code></pre>
<p>The missing value is also contagious: it represents an unknown quantity, so
using it as an argument to a function usually produces another missing value.
The idea is that if the inputs to a computation are unknown, generally so is
the output:</p>
<div class="sourceCode" id="cb202"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb202-1"><a href="data-structures.html#cb202-1" aria-hidden="true" tabindex="-1"></a><span class="cn">NA</span> <span class="sc">-</span> <span class="dv">3</span></span></code></pre></div>
<pre><code>## [1] NA</code></pre>
<div class="sourceCode" id="cb204"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb204-1"><a href="data-structures.html#cb204-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(<span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="cn">NA</span>))</span></code></pre></div>
<pre><code>## [1] NA</code></pre>
<p>As a consequence, testing whether an object is equal to the missing value with
<code>==</code> doesn’t return a meaningful result:</p>
<div class="sourceCode" id="cb206"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb206-1"><a href="data-structures.html#cb206-1" aria-hidden="true" tabindex="-1"></a><span class="dv">5</span> <span class="sc">==</span> <span class="cn">NA</span></span></code></pre></div>
<pre><code>## [1] NA</code></pre>
<div class="sourceCode" id="cb208"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb208-1"><a href="data-structures.html#cb208-1" aria-hidden="true" tabindex="-1"></a><span class="cn">NA</span> <span class="sc">==</span> <span class="cn">NA</span></span></code></pre></div>
<pre><code>## [1] NA</code></pre>
<p>You can use the <code>is.na</code> function instead:</p>
<div class="sourceCode" id="cb210"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb210-1"><a href="data-structures.html#cb210-1" aria-hidden="true" tabindex="-1"></a><span class="fu">is.na</span>(<span class="dv">5</span>)</span></code></pre></div>
<pre><code>## [1] FALSE</code></pre>
<div class="sourceCode" id="cb212"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb212-1"><a href="data-structures.html#cb212-1" aria-hidden="true" tabindex="-1"></a><span class="fu">is.na</span>(<span class="cn">NA</span>)</span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<div class="sourceCode" id="cb214"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb214-1"><a href="data-structures.html#cb214-1" aria-hidden="true" tabindex="-1"></a><span class="fu">is.na</span>(<span class="fu">c</span>(<span class="dv">1</span>, <span class="cn">NA</span>, <span class="dv">3</span>))</span></code></pre></div>
<pre><code>## [1] FALSE  TRUE FALSE</code></pre>
<p>Missing values are a feature that sets R apart from most other programming
languages.</p>
</div>
<div id="infinity" class="section level3" number="2.2.2">
<h3><span class="header-section-number">2.2.2</span> Infinity</h3>
<p>The value <code>Inf</code> represents infinity, and can be numeric or complex. You’re most
likely to encounter it as the result of certain computations:</p>
<div class="sourceCode" id="cb216"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb216-1"><a href="data-structures.html#cb216-1" aria-hidden="true" tabindex="-1"></a><span class="dv">13</span> <span class="sc">/</span> <span class="dv">0</span></span></code></pre></div>
<pre><code>## [1] Inf</code></pre>
<div class="sourceCode" id="cb218"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb218-1"><a href="data-structures.html#cb218-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(<span class="cn">Inf</span>)</span></code></pre></div>
<pre><code>## [1] &quot;numeric&quot;</code></pre>
<p>You can use the <code>is.infinite</code> function to test whether a value is infinite:</p>
<div class="sourceCode" id="cb220"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb220-1"><a href="data-structures.html#cb220-1" aria-hidden="true" tabindex="-1"></a><span class="fu">is.infinite</span>(<span class="dv">3</span>)</span></code></pre></div>
<pre><code>## [1] FALSE</code></pre>
<div class="sourceCode" id="cb222"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb222-1"><a href="data-structures.html#cb222-1" aria-hidden="true" tabindex="-1"></a><span class="fu">is.infinite</span>(<span class="fu">c</span>(<span class="sc">-</span><span class="cn">Inf</span>, <span class="dv">0</span>, <span class="cn">Inf</span>))</span></code></pre></div>
<pre><code>## [1]  TRUE FALSE  TRUE</code></pre>
</div>
<div id="not-a-number" class="section level3" number="2.2.3">
<h3><span class="header-section-number">2.2.3</span> Not a Number</h3>
<p>The value <code>NaN</code>, called <em>not a number</em>, represents a quantity that’s undefined
mathematically. For instance, dividing 0 by 0 is undefined:</p>
<div class="sourceCode" id="cb224"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb224-1"><a href="data-structures.html#cb224-1" aria-hidden="true" tabindex="-1"></a><span class="dv">0</span> <span class="sc">/</span> <span class="dv">0</span></span></code></pre></div>
<pre><code>## [1] NaN</code></pre>
<div class="sourceCode" id="cb226"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb226-1"><a href="data-structures.html#cb226-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(<span class="cn">NaN</span>)</span></code></pre></div>
<pre><code>## [1] &quot;numeric&quot;</code></pre>
<p>Like <code>Inf</code>, <code>NaN</code> can be numeric or complex.</p>
<p>You can use the <code>is.nan</code> function to test whether a value is <code>NaN</code>:</p>
<div class="sourceCode" id="cb228"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb228-1"><a href="data-structures.html#cb228-1" aria-hidden="true" tabindex="-1"></a><span class="fu">is.nan</span>(<span class="fu">c</span>(<span class="fl">10.1</span>, <span class="fu">log</span>(<span class="sc">-</span><span class="dv">1</span>), <span class="dv">3</span>))</span></code></pre></div>
<pre><code>## Warning in log(-1): NaNs produced</code></pre>
<pre><code>## [1] FALSE  TRUE FALSE</code></pre>
</div>
<div id="null" class="section level3" number="2.2.4">
<h3><span class="header-section-number">2.2.4</span> Null</h3>
<p>The value <code>NULL</code> represents a quantity that’s undefined in R. Most of the time,
<code>NULL</code> indicates the absence of a result. For instance, vectors don’t have
dimensions, so the <code>dim</code> function returns <code>NULL</code> for vectors:</p>
<div class="sourceCode" id="cb231"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb231-1"><a href="data-structures.html#cb231-1" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(<span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>))</span></code></pre></div>
<pre><code>## NULL</code></pre>
<div class="sourceCode" id="cb233"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb233-1"><a href="data-structures.html#cb233-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(<span class="cn">NULL</span>)</span></code></pre></div>
<pre><code>## [1] &quot;NULL&quot;</code></pre>
<div class="sourceCode" id="cb235"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb235-1"><a href="data-structures.html#cb235-1" aria-hidden="true" tabindex="-1"></a><span class="fu">typeof</span>(<span class="cn">NULL</span>)</span></code></pre></div>
<pre><code>## [1] &quot;NULL&quot;</code></pre>
<p>Unlike the other special values, <code>NULL</code> has its own unique type and class.</p>
<p>You can use the <code>is.null</code> function to test whether a value is <code>NULL</code>:</p>
<div class="sourceCode" id="cb237"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb237-1"><a href="data-structures.html#cb237-1" aria-hidden="true" tabindex="-1"></a><span class="fu">is.null</span>(<span class="st">&quot;null&quot;</span>)</span></code></pre></div>
<pre><code>## [1] FALSE</code></pre>
<div class="sourceCode" id="cb239"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb239-1"><a href="data-structures.html#cb239-1" aria-hidden="true" tabindex="-1"></a><span class="fu">is.null</span>(<span class="cn">NULL</span>)</span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
</div>
</div>
<div id="matrices-arrays" class="section level2" number="2.3">
<h2><span class="header-section-number">2.3</span> Matrices &amp; Arrays</h2>
<p>A <em>matrix</em> is the two-dimensional analogue of a vector. The elements, which are
arranged into rows and columns, are ordered and homogeneous.</p>
<p>You can create a matrix from a vector with the <code>matrix</code> function. By default,
the columns are filled first:</p>
<div class="sourceCode" id="cb241"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb241-1"><a href="data-structures.html#cb241-1" aria-hidden="true" tabindex="-1"></a><span class="co"># A matrix with 2 rows and 3 columns:</span></span>
<span id="cb241-2"><a href="data-structures.html#cb241-2" aria-hidden="true" tabindex="-1"></a><span class="fu">matrix</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">6</span>, <span class="dv">2</span>, <span class="dv">3</span>)</span></code></pre></div>
<pre><code>##      [,1] [,2] [,3]
## [1,]    1    3    5
## [2,]    2    4    6</code></pre>
<p>The class of a matrix is always <code>matrix</code>, and the type matches the type of the
elements:</p>
<div class="sourceCode" id="cb243"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb243-1"><a href="data-structures.html#cb243-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">=</span> <span class="fu">matrix</span>(<span class="fu">c</span>(<span class="st">&quot;a&quot;</span>, <span class="st">&quot;b&quot;</span>, <span class="cn">NA</span>, <span class="st">&quot;c&quot;</span>), <span class="dv">2</span>, <span class="dv">2</span>)</span>
<span id="cb243-2"><a href="data-structures.html#cb243-2" aria-hidden="true" tabindex="-1"></a>x</span></code></pre></div>
<pre><code>##      [,1] [,2]
## [1,] &quot;a&quot;  NA  
## [2,] &quot;b&quot;  &quot;c&quot;</code></pre>
<div class="sourceCode" id="cb245"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb245-1"><a href="data-structures.html#cb245-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(x)</span></code></pre></div>
<pre><code>## [1] &quot;matrix&quot; &quot;array&quot;</code></pre>
<div class="sourceCode" id="cb247"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb247-1"><a href="data-structures.html#cb247-1" aria-hidden="true" tabindex="-1"></a><span class="fu">typeof</span>(x)</span></code></pre></div>
<pre><code>## [1] &quot;character&quot;</code></pre>
<p>You can use the matrix multiplication operator <code>%*%</code> to multiply two matrices
with compatible dimensions.</p>
<p>An <em>array</em> is a further generalization of matrices to higher dimensions. You
can create an array from a vector with the <code>array</code> function. The
characteristics of arrays are almost identical to matrices, but the class of an
array is always <code>array</code>.</p>
</div>
<div id="factors" class="section level2" number="2.4">
<h2><span class="header-section-number">2.4</span> Factors</h2>
<p>A feature is <em>categorical</em> if it measures a qualitative category. For example,
the genres <code>rock</code>, <code>blues</code>, <code>alternative</code>, <code>folk</code>, <code>pop</code> are categories.</p>
<p>R uses the class <code>factor</code> to represent categorical data. Visualizations and
statistical models sometimes treat factors differently than other data types,
so it’s important to make sure you have the right data type. If you’re ever
unsure, remember that you can check the class of an object with the <code>class</code>
function.</p>
<p>When you load a data set, R usually can’t tell which features are categorical.
That means identifying and converting the categorical features is up to you.
For beginners, it can be difficult to understand whether a feature is
categorical or not. The key is to think about whether you want to use the
feature to divide the data into groups.</p>
<p>For example, if we want to know how many songs are in the <code>rock</code> genre, we
first need to divide the songs by genre, and then count the number of songs in
each group (or at least the <code>rock</code> group).</p>
<p>As a second example, months recorded as numbers can be categorical or not,
depending on how you want to use them. You might want to treat them as
categorical (for example, to compute max rainfall in each month) or you might
want to treat them as numbers (for example, to compute the number of months
time between two events).</p>
<p>The bottom line is that you have to think about what you’ll be doing in the
analysis. In some cases, you might treat a feature as categorical only for part
of the analysis.</p>
<p>Let’s think about which features are categorical in earnings data set. To
refresh our memory of what’s in the data set, we can look at the structural
summary:</p>
<div class="sourceCode" id="cb249"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb249-1"><a href="data-structures.html#cb249-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(earn)</span></code></pre></div>
<pre><code>## &#39;data.frame&#39;:    4224 obs. of  8 variables:
##  $ sex               : chr  &quot;Both Sexes&quot; &quot;Both Sexes&quot; &quot;Both Sexes&quot; &quot;Both Sexes&quot; ...
##  $ race              : chr  &quot;All Races&quot; &quot;All Races&quot; &quot;All Races&quot; &quot;All Races&quot; ...
##  $ ethnic_origin     : chr  &quot;All Origins&quot; &quot;All Origins&quot; &quot;All Origins&quot; &quot;All Origins&quot; ...
##  $ age               : chr  &quot;16 years and over&quot; &quot;16 years and over&quot; &quot;16 years and over&quot; &quot;16 years and over&quot; ...
##  $ year              : int  2010 2010 2010 2010 2011 2011 2011 2011 2012 2012 ...
##  $ quarter           : int  1 2 3 4 1 2 3 4 1 2 ...
##  $ n_persons         : int  96821000 99798000 101385000 100120000 98329000 100593000 101447000 101458000 100830000 102769000 ...
##  $ median_weekly_earn: int  754 740 740 752 755 753 753 764 769 771 ...</code></pre>
<p>The columns <code>n_persons</code> and <code>median_weekly_earn</code> are quantitative rather than
categorical, since they measure quantities of people and dollars, respectively.</p>
<p>The <code>sex</code>, <code>race</code>, <code>ethnic_origin</code>, and <code>age</code> columns are all categorical,
since they are all qualitative measurements. We can see this better if we use
the <code>table</code> function to compute frequencies for the values in the columns:</p>
<div class="sourceCode" id="cb251"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb251-1"><a href="data-structures.html#cb251-1" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(earn<span class="sc">$</span>sex)</span></code></pre></div>
<pre><code>## 
## Both Sexes        Men      Women 
##       1408       1408       1408</code></pre>
<div class="sourceCode" id="cb253"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb253-1"><a href="data-structures.html#cb253-1" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(earn<span class="sc">$</span>race)</span></code></pre></div>
<pre><code>## 
##                 All Races                     Asian Black or African American 
##                      2244                       660                       660 
##                     White 
##                       660</code></pre>
<div class="sourceCode" id="cb255"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb255-1"><a href="data-structures.html#cb255-1" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(earn<span class="sc">$</span>ethnic_origin)</span></code></pre></div>
<pre><code>## 
##        All Origins Hispanic or Latino 
##               3564                660</code></pre>
<div class="sourceCode" id="cb257"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb257-1"><a href="data-structures.html#cb257-1" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(earn<span class="sc">$</span>age)</span></code></pre></div>
<pre><code>## 
##    16 to 19 years    16 to 24 years 16 years and over    20 to 24 years 
##               132               660               660               132 
##    25 to 34 years    25 to 54 years 25 years and over    35 to 44 years 
##               132               660               660               132 
##    45 to 54 years    55 to 64 years 55 years and over 65 years and over 
##               132               132               660               132</code></pre>
<p>Each column has only a few unique values, repeated many times. These are ideal
for grouping the data. If age had been recorded as a number, rather than a
range, it would probably be better to treat it as quantitative, since there
would be far more unique values. Columns with many unique values don’t make
good categorical features, because each group will only have a few elements!</p>
<p>That leaves us with the <code>year</code> and <code>quarter</code> columns. It’s easy to imagine
grouping the data by year or quarter, but these are also clearly numbers. These
columns can be treated as quantitative or categorical data, depending on how we
want to use them to analyze the data.</p>
<p>Let’s convert the <code>age</code> column to a factor. To do this, use the <code>factor</code>
function:</p>
<div class="sourceCode" id="cb259"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb259-1"><a href="data-structures.html#cb259-1" aria-hidden="true" tabindex="-1"></a>age <span class="ot">=</span> <span class="fu">factor</span>(earn<span class="sc">$</span>age)</span>
<span id="cb259-2"><a href="data-structures.html#cb259-2" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(age)</span></code></pre></div>
<pre><code>## [1] 16 years and over 16 years and over 16 years and over 16 years and over
## [5] 16 years and over 16 years and over
## 12 Levels: 16 to 19 years 16 to 24 years 16 years and over ... 65 years and over</code></pre>
<p>Notice that factors are printed differently than strings.</p>
<p>The categories of a factor are called <em>levels</em>. You can list the levels with
the <code>levels</code> function:</p>
<div class="sourceCode" id="cb261"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb261-1"><a href="data-structures.html#cb261-1" aria-hidden="true" tabindex="-1"></a><span class="fu">levels</span>(age)</span></code></pre></div>
<pre><code>##  [1] &quot;16 to 19 years&quot;    &quot;16 to 24 years&quot;    &quot;16 years and over&quot;
##  [4] &quot;20 to 24 years&quot;    &quot;25 to 34 years&quot;    &quot;25 to 54 years&quot;   
##  [7] &quot;25 years and over&quot; &quot;35 to 44 years&quot;    &quot;45 to 54 years&quot;   
## [10] &quot;55 to 64 years&quot;    &quot;55 years and over&quot; &quot;65 years and over&quot;</code></pre>
<p>Factors remember all possible levels even if you take a subset:</p>
<div class="sourceCode" id="cb263"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb263-1"><a href="data-structures.html#cb263-1" aria-hidden="true" tabindex="-1"></a>age[<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>]</span></code></pre></div>
<pre><code>## [1] 16 years and over 16 years and over 16 years and over
## 12 Levels: 16 to 19 years 16 to 24 years 16 years and over ... 65 years and over</code></pre>
<p>This is another way factors are different from strings. Factors “remember” all
possible levels even if they aren’t present. This ensures that if you plot a
factor, the missing levels will still be represented on the plot.</p>
<p>You can make a factor forget levels that aren’t present with the <code>droplevels</code>
function:</p>
<div class="sourceCode" id="cb265"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb265-1"><a href="data-structures.html#cb265-1" aria-hidden="true" tabindex="-1"></a><span class="fu">droplevels</span>(age[<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>])</span></code></pre></div>
<pre><code>## [1] 16 years and over 16 years and over 16 years and over
## Levels: 16 years and over</code></pre>
</div>
<div id="indexing" class="section level2" number="2.5">
<h2><span class="header-section-number">2.5</span> Indexing</h2>
<p>The way to get and set elements of a data structure is by <em>indexing</em>. Sometimes
this is also called <em>subsetting</em> or (element) <em>extraction</em>. Indexing is a
fundamental operation in R, key to reasoning about how to solve problems with
the language.</p>
<p>We first saw indexing in Section <a href="getting-started.html#data-frames">1.6</a>, where we used <code>$</code>, the
dollar sign operator, to get and set data frame columns. We saw indexing again
in Section <a href="getting-started.html#indexing-vectors">1.7.2</a>, where we used <code>[</code>, the indexing or square
bracket operator, to get and set elements of vectors.</p>
<p>The indexing operator <code>[</code> is R’s primary operator for indexing. It works in
four different ways, depending on the type of the index you use. These four
ways to select elements are:</p>
<ol style="list-style-type: decimal">
<li>All elements, with no index</li>
<li>By position, with a numeric index</li>
<li>By name, with a character index</li>
<li>By condition, with a logical index</li>
</ol>
<p>Let’s examine each in more detail. We’ll use this vector as an example, to keep
things concise:</p>
<div class="sourceCode" id="cb267"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb267-1"><a href="data-structures.html#cb267-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">=</span> <span class="fu">c</span>(<span class="at">a =</span> <span class="dv">10</span>, <span class="at">b =</span> <span class="dv">20</span>, <span class="at">c =</span> <span class="dv">30</span>, <span class="at">d =</span> <span class="dv">40</span>, <span class="at">e =</span> <span class="dv">50</span>)</span>
<span id="cb267-2"><a href="data-structures.html#cb267-2" aria-hidden="true" tabindex="-1"></a>x</span></code></pre></div>
<pre><code>##  a  b  c  d  e 
## 10 20 30 40 50</code></pre>
<p>Even though we’re using a vector here, the indexing operator works with almost
all data structures, including factors, lists, matrices, and data frames. We’ll
look at unique behavior for some of these later on.</p>
<div id="all-elements" class="section level3" number="2.5.1">
<h3><span class="header-section-number">2.5.1</span> All Elements</h3>
<p>The first way to use <code>[</code> to select elements is to leave the index blank. This
selects all elements:</p>
<div class="sourceCode" id="cb269"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb269-1"><a href="data-structures.html#cb269-1" aria-hidden="true" tabindex="-1"></a>x[]</span></code></pre></div>
<pre><code>##  a  b  c  d  e 
## 10 20 30 40 50</code></pre>
<p>This way of indexing is rarely used for getting elements, since it’s the same
as entering the variable name without the indexing operator. Instead, its main
use is for setting elements. Suppose we want to set all the elements of <code>x</code> to
<code>5</code>. You might try writing this:</p>
<div class="sourceCode" id="cb271"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb271-1"><a href="data-structures.html#cb271-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">=</span> <span class="dv">5</span></span>
<span id="cb271-2"><a href="data-structures.html#cb271-2" aria-hidden="true" tabindex="-1"></a>x</span></code></pre></div>
<pre><code>## [1] 5</code></pre>
<p>Rather than setting each element to <code>5</code>, this sets <code>x</code> to the scalar <code>5</code>, which
is not what we want. Let’s reset the vector and try again, this time using the
indexing operator:</p>
<div class="sourceCode" id="cb273"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb273-1"><a href="data-structures.html#cb273-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">=</span> <span class="fu">c</span>(<span class="at">a =</span> <span class="dv">10</span>, <span class="at">b =</span> <span class="dv">20</span>, <span class="at">c =</span> <span class="dv">30</span>, <span class="at">d =</span> <span class="dv">40</span>, <span class="at">e =</span> <span class="dv">50</span>)</span>
<span id="cb273-2"><a href="data-structures.html#cb273-2" aria-hidden="true" tabindex="-1"></a>x[] <span class="ot">=</span> <span class="dv">5</span></span>
<span id="cb273-3"><a href="data-structures.html#cb273-3" aria-hidden="true" tabindex="-1"></a>x</span></code></pre></div>
<pre><code>## a b c d e 
## 5 5 5 5 5</code></pre>
<p>As you can see, now all the elements are <code>5</code>. So the indexing operator is
necessary to specify that we want to set the elements rather than the whole
variable.</p>
<p>Let’s reset <code>x</code> one more time, so that we can use it again in the next example:</p>
<div class="sourceCode" id="cb275"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb275-1"><a href="data-structures.html#cb275-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">=</span> <span class="fu">c</span>(<span class="at">a =</span> <span class="dv">10</span>, <span class="at">b =</span> <span class="dv">20</span>, <span class="at">c =</span> <span class="dv">30</span>, <span class="at">d =</span> <span class="dv">40</span>, <span class="at">e =</span> <span class="dv">50</span>)</span></code></pre></div>
</div>
<div id="by-position" class="section level3" number="2.5.2">
<h3><span class="header-section-number">2.5.2</span> By Position</h3>
<p>The second way to use <code>[</code> is to select elements by position. This happens when
you use an integer or numeric index. We already saw the basics of this in
Section <a href="getting-started.html#indexing-vectors">1.7.2</a>.</p>
<p>The positions of the elements in a vector (or other data structure) correspond
to numbers starting from 1 for the first element. This way of indexing is
frequently used together with the sequence operator <code>:</code> to get ranges of
values. For instance, let’s get the 2nd through 4th elements of <code>x</code>:</p>
<div class="sourceCode" id="cb276"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb276-1"><a href="data-structures.html#cb276-1" aria-hidden="true" tabindex="-1"></a>x[<span class="dv">2</span><span class="sc">:</span><span class="dv">4</span>]</span></code></pre></div>
<pre><code>##  b  c  d 
## 20 30 40</code></pre>
<p>You can also use this way of indexing to set specific elements or ranges of
elements. For example, let’s set the 3rd and 5th elements of <code>x</code> to <code>9</code> and
<code>7</code>, respectively:</p>
<div class="sourceCode" id="cb278"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb278-1"><a href="data-structures.html#cb278-1" aria-hidden="true" tabindex="-1"></a>x[<span class="fu">c</span>(<span class="dv">3</span>, <span class="dv">5</span>)] <span class="ot">=</span> <span class="fu">c</span>(<span class="dv">9</span>, <span class="dv">7</span>)</span>
<span id="cb278-2"><a href="data-structures.html#cb278-2" aria-hidden="true" tabindex="-1"></a>x</span></code></pre></div>
<pre><code>##  a  b  c  d  e 
## 10 20  9 40  7</code></pre>
<p>When getting elements, you can repeat numbers in the index to get the same
element more than once. You can also use the order of the numbers to control
the order of the elements:</p>
<div class="sourceCode" id="cb280"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb280-1"><a href="data-structures.html#cb280-1" aria-hidden="true" tabindex="-1"></a>x[<span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">2</span>)]</span></code></pre></div>
<pre><code>##  b  a  b  b 
## 20 10 20 20</code></pre>
<p>Finally, if the index contains only negative numbers, the elements at those
positions are excluded rather than selected. For instance, let’s get all
elements except the 1st and 5th:</p>
<div class="sourceCode" id="cb282"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb282-1"><a href="data-structures.html#cb282-1" aria-hidden="true" tabindex="-1"></a>x[<span class="sc">-</span><span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">5</span>)]</span></code></pre></div>
<pre><code>##  b  c  d 
## 20  9 40</code></pre>
<p>When you index by position, the index should always be all positive or all
negative. Using a mix of positive and negative numbers causes R to emit error
rather than returning elements, since it’s unclear what the result should be:</p>
<div class="sourceCode" id="cb284"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb284-1"><a href="data-structures.html#cb284-1" aria-hidden="true" tabindex="-1"></a>x[<span class="fu">c</span>(<span class="sc">-</span><span class="dv">1</span>, <span class="dv">2</span>)]</span></code></pre></div>
<pre><code>## Error in x[c(-1, 2)]: only 0&#39;s may be mixed with negative subscripts</code></pre>
</div>
<div id="by-name" class="section level3" number="2.5.3">
<h3><span class="header-section-number">2.5.3</span> By Name</h3>
<p>The third way to use <code>[</code> is to select elements by name. This happens when you
use a character vector as the index, and only works with named data structures.</p>
<p>Like indexing by position, you can use indexing by name to get or set elements.
You can also use it to repeat elements or change the order. Let’s get elements
<code>a</code>, <code>c</code>, <code>d</code>, and <code>a</code> again from the vector <code>x</code>:</p>
<div class="sourceCode" id="cb286"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb286-1"><a href="data-structures.html#cb286-1" aria-hidden="true" tabindex="-1"></a>y <span class="ot">=</span> x[<span class="fu">c</span>(<span class="st">&quot;a&quot;</span>, <span class="st">&quot;c&quot;</span>, <span class="st">&quot;d&quot;</span>, <span class="st">&quot;a&quot;</span>)]</span>
<span id="cb286-2"><a href="data-structures.html#cb286-2" aria-hidden="true" tabindex="-1"></a>y</span></code></pre></div>
<pre><code>##  a  c  d  a 
## 10  9 40 10</code></pre>
<p>Element names are generally unique, but if they’re not, indexing by name gets
or sets the first element whose name matches the index:</p>
<div class="sourceCode" id="cb288"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb288-1"><a href="data-structures.html#cb288-1" aria-hidden="true" tabindex="-1"></a>y[<span class="st">&quot;a&quot;</span>]</span></code></pre></div>
<pre><code>##  a 
## 10</code></pre>
<p>Let’s reset <code>x</code> again to prepare for learning about the final way to index:</p>
<div class="sourceCode" id="cb290"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb290-1"><a href="data-structures.html#cb290-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">=</span> <span class="fu">c</span>(<span class="at">a =</span> <span class="dv">10</span>, <span class="at">b =</span> <span class="dv">20</span>, <span class="at">c =</span> <span class="dv">30</span>, <span class="at">d =</span> <span class="dv">40</span>, <span class="at">e =</span> <span class="dv">50</span>)</span></code></pre></div>
</div>
<div id="by-condition" class="section level3" number="2.5.4">
<h3><span class="header-section-number">2.5.4</span> By Condition</h3>
<p>The fourth and final way to use <code>[</code> is to select elements based on a condition.
This happens when you use a logical vector as the index. The logical vector
should have the same length as what you’re indexing, and will be recycled if it
doesn’t.</p>
<div id="congruent-vectors" class="section level4 unnumbered">
<h4>Congruent Vectors</h4>
<p>To understand indexing by condition, we first need to learn about congruent
vectors. Two vectors are <em>congruent</em> if they have the same length and they
correspond element-by-element.</p>
<p>For example, suppose you do a survey that records each respondent’s favorite
animal and age. These are two different vectors of information, but each person
will have a response for both. So you’ll have two vectors that are the same
length:</p>
<div class="sourceCode" id="cb291"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb291-1"><a href="data-structures.html#cb291-1" aria-hidden="true" tabindex="-1"></a>animal <span class="ot">=</span> <span class="fu">c</span>(<span class="st">&quot;dog&quot;</span>, <span class="st">&quot;cat&quot;</span>, <span class="st">&quot;iguana&quot;</span>)</span>
<span id="cb291-2"><a href="data-structures.html#cb291-2" aria-hidden="true" tabindex="-1"></a>age <span class="ot">=</span> <span class="fu">c</span>(<span class="dv">31</span>, <span class="dv">24</span>, <span class="dv">72</span>)</span></code></pre></div>
<p>The 1st element of each vector corresponds to the 1st person, the 2nd to the
2nd person, and so on. These vectors are congruent.</p>
<p>Notice that columns in a data frame are always congruent!</p>
</div>
<div id="back-to-indexing" class="section level4 unnumbered">
<h4>Back to Indexing</h4>
<p>When you index by condition, the index should generally be congruent to the
object you’re indexing. Elements where the index is <code>TRUE</code> are kept and
elements where the index is <code>FALSE</code> are dropped.</p>
<p>If you create the index from a condition on the object, it’s automatically
congruent. For instance, let’s make a condition based on the vector <code>x</code>:</p>
<div class="sourceCode" id="cb292"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb292-1"><a href="data-structures.html#cb292-1" aria-hidden="true" tabindex="-1"></a>is_small <span class="ot">=</span> x <span class="sc">&lt;</span> <span class="dv">25</span></span>
<span id="cb292-2"><a href="data-structures.html#cb292-2" aria-hidden="true" tabindex="-1"></a>is_small</span></code></pre></div>
<pre><code>##     a     b     c     d     e 
##  TRUE  TRUE FALSE FALSE FALSE</code></pre>
<p>The 1st element in the logical vector <code>is_small</code> corresponds to the 1st element
of <code>x</code>, the 2nd to the 2nd, and so on. The vectors <code>x</code> and <code>is_small</code> are
congruent.</p>
<p>It makes sense to use <code>is_small</code> as an index for <code>x</code>, and it gives us all the
elements less than <code>25</code>:</p>
<div class="sourceCode" id="cb294"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb294-1"><a href="data-structures.html#cb294-1" aria-hidden="true" tabindex="-1"></a>x[is_small]</span></code></pre></div>
<pre><code>##  a  b 
## 10 20</code></pre>
<p>Of course, you can also avoid using an intermediate variable for the condition:</p>
<div class="sourceCode" id="cb296"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb296-1"><a href="data-structures.html#cb296-1" aria-hidden="true" tabindex="-1"></a>x[x <span class="sc">&gt;</span> <span class="dv">10</span>]</span></code></pre></div>
<pre><code>##  b  c  d  e 
## 20 30 40 50</code></pre>
<p>If you create index some other way (not using the object), make sure that it’s
still congruent to the object. Otherwise, the subset returned from indexing
might not be meaningful.</p>
<p>You can also use indexing by condition to set elements, just as the other ways
of indexing can be used to set elements. For instance, let’s set all the
elements of <code>x</code> that are greater than <code>10</code> to the missing value <code>NA</code>:</p>
<div class="sourceCode" id="cb298"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb298-1"><a href="data-structures.html#cb298-1" aria-hidden="true" tabindex="-1"></a>x[x <span class="sc">&gt;</span> <span class="dv">10</span>] <span class="ot">=</span> <span class="cn">NA</span></span>
<span id="cb298-2"><a href="data-structures.html#cb298-2" aria-hidden="true" tabindex="-1"></a>x</span></code></pre></div>
<pre><code>##  a  b  c  d  e 
## 10 NA NA NA NA</code></pre>
</div>
</div>
<div id="logic" class="section level3" number="2.5.5">
<h3><span class="header-section-number">2.5.5</span> Logic</h3>
<p>All of the conditions we’ve seen so far have been written in terms of a single
test. If you want to use more sophisticated conditions, R provides operators to
negate and combine logical vectors. These operators are useful for working with
logical vectors even outside the context of indexing.</p>
<div id="negation" class="section level4 unnumbered">
<h4>Negation</h4>
<p>The <em>NOT operator</em> <code>!</code> converts <code>TRUE</code> to <code>FALSE</code> and <code>FALSE</code> to <code>TRUE</code>:</p>
<div class="sourceCode" id="cb300"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb300-1"><a href="data-structures.html#cb300-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">=</span> <span class="fu">c</span>(<span class="cn">TRUE</span>, <span class="cn">FALSE</span>, <span class="cn">TRUE</span>, <span class="cn">TRUE</span>, <span class="cn">NA</span>)</span>
<span id="cb300-2"><a href="data-structures.html#cb300-2" aria-hidden="true" tabindex="-1"></a>x</span></code></pre></div>
<pre><code>## [1]  TRUE FALSE  TRUE  TRUE    NA</code></pre>
<div class="sourceCode" id="cb302"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb302-1"><a href="data-structures.html#cb302-1" aria-hidden="true" tabindex="-1"></a><span class="sc">!</span>x</span></code></pre></div>
<pre><code>## [1] FALSE  TRUE FALSE FALSE    NA</code></pre>
<p>You can use <code>!</code> with a condition:</p>
<div class="sourceCode" id="cb304"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb304-1"><a href="data-structures.html#cb304-1" aria-hidden="true" tabindex="-1"></a>y <span class="ot">=</span> <span class="fu">c</span>(<span class="st">&quot;hi&quot;</span>, <span class="st">&quot;hello&quot;</span>)</span>
<span id="cb304-2"><a href="data-structures.html#cb304-2" aria-hidden="true" tabindex="-1"></a><span class="sc">!</span>(y <span class="sc">==</span> <span class="st">&quot;hi&quot;</span>)</span></code></pre></div>
<pre><code>## [1] FALSE  TRUE</code></pre>
<p>The NOT operator is vectorized.</p>
</div>
<div id="combinations" class="section level4 unnumbered">
<h4>Combinations</h4>
<p>R also has operators for combining logical values.</p>
<p>The <em>AND operator</em> <code>&amp;</code> returns <code>TRUE</code> only when both arguments are <code>TRUE</code>. Here
are some examples:</p>
<div class="sourceCode" id="cb306"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb306-1"><a href="data-structures.html#cb306-1" aria-hidden="true" tabindex="-1"></a><span class="cn">FALSE</span> <span class="sc">&amp;</span> <span class="cn">FALSE</span></span></code></pre></div>
<pre><code>## [1] FALSE</code></pre>
<div class="sourceCode" id="cb308"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb308-1"><a href="data-structures.html#cb308-1" aria-hidden="true" tabindex="-1"></a><span class="cn">TRUE</span> <span class="sc">&amp;</span> <span class="cn">FALSE</span></span></code></pre></div>
<pre><code>## [1] FALSE</code></pre>
<div class="sourceCode" id="cb310"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb310-1"><a href="data-structures.html#cb310-1" aria-hidden="true" tabindex="-1"></a><span class="cn">FALSE</span> <span class="sc">&amp;</span> <span class="cn">TRUE</span></span></code></pre></div>
<pre><code>## [1] FALSE</code></pre>
<div class="sourceCode" id="cb312"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb312-1"><a href="data-structures.html#cb312-1" aria-hidden="true" tabindex="-1"></a><span class="cn">TRUE</span> <span class="sc">&amp;</span> <span class="cn">TRUE</span></span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<div class="sourceCode" id="cb314"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb314-1"><a href="data-structures.html#cb314-1" aria-hidden="true" tabindex="-1"></a><span class="fu">c</span>(<span class="cn">TRUE</span>, <span class="cn">FALSE</span>, <span class="cn">TRUE</span>) <span class="sc">&amp;</span> <span class="fu">c</span>(<span class="cn">TRUE</span>, <span class="cn">TRUE</span>, <span class="cn">FALSE</span>)</span></code></pre></div>
<pre><code>## [1]  TRUE FALSE FALSE</code></pre>
<p>The <em>OR operator</em> <code>|</code> returns <code>TRUE</code> when at least one argument is <code>TRUE</code>.
Let’s see some examples:</p>
<div class="sourceCode" id="cb316"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb316-1"><a href="data-structures.html#cb316-1" aria-hidden="true" tabindex="-1"></a><span class="cn">FALSE</span> <span class="sc">|</span> <span class="cn">FALSE</span></span></code></pre></div>
<pre><code>## [1] FALSE</code></pre>
<div class="sourceCode" id="cb318"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb318-1"><a href="data-structures.html#cb318-1" aria-hidden="true" tabindex="-1"></a><span class="cn">TRUE</span> <span class="sc">|</span> <span class="cn">FALSE</span></span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<div class="sourceCode" id="cb320"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb320-1"><a href="data-structures.html#cb320-1" aria-hidden="true" tabindex="-1"></a><span class="cn">FALSE</span> <span class="sc">|</span> <span class="cn">TRUE</span></span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<div class="sourceCode" id="cb322"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb322-1"><a href="data-structures.html#cb322-1" aria-hidden="true" tabindex="-1"></a><span class="cn">TRUE</span> <span class="sc">|</span> <span class="cn">TRUE</span></span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<div class="sourceCode" id="cb324"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb324-1"><a href="data-structures.html#cb324-1" aria-hidden="true" tabindex="-1"></a><span class="fu">c</span>(<span class="cn">TRUE</span>, <span class="cn">FALSE</span>) <span class="sc">|</span> <span class="fu">c</span>(<span class="cn">TRUE</span>, <span class="cn">TRUE</span>)</span></code></pre></div>
<pre><code>## [1] TRUE TRUE</code></pre>
<p>Be careful: everyday English is less precise than logic. You might say:</p>
<blockquote>
<p>I want all subjects with age over 50 and all subjects that like cats.</p>
</blockquote>
<p>But in logic this means:</p>
<p><code>(subject age over 50) OR (subject likes cats)</code></p>
<p>So think carefully about whether you need both conditions to be true (AND) or
at least one (OR).</p>
<p>Rarely, you might want <em>exactly one</em> condition to be true. The <em>XOR (eXclusive
OR) function</em> <code>xor()</code> returns <code>TRUE</code> when exactly one argument is <code>TRUE</code>. For
example:</p>
<div class="sourceCode" id="cb326"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb326-1"><a href="data-structures.html#cb326-1" aria-hidden="true" tabindex="-1"></a><span class="fu">xor</span>(<span class="cn">FALSE</span>, <span class="cn">FALSE</span>)</span></code></pre></div>
<pre><code>## [1] FALSE</code></pre>
<div class="sourceCode" id="cb328"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb328-1"><a href="data-structures.html#cb328-1" aria-hidden="true" tabindex="-1"></a><span class="fu">xor</span>(<span class="cn">TRUE</span>, <span class="cn">FALSE</span>)</span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<div class="sourceCode" id="cb330"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb330-1"><a href="data-structures.html#cb330-1" aria-hidden="true" tabindex="-1"></a><span class="fu">xor</span>(<span class="cn">TRUE</span>, <span class="cn">TRUE</span>)</span></code></pre></div>
<pre><code>## [1] FALSE</code></pre>
<p>The AND, OR, and XOR operators are vectorized.</p>
</div>
<div id="short-circuiting" class="section level4 unnumbered">
<h4>Short-circuiting</h4>
<p>The second argument is irrelevant in some conditions:</p>
<ul>
<li><code>FALSE &amp;</code> is always <code>FALSE</code></li>
<li><code>TRUE |</code> is always <code>TRUE</code></li>
</ul>
<p>Now imagine you have <code>FALSE &amp; long_computation()</code>. You can save time by
skipping <code>long_computation()</code>. A <em>short-circuit operator</em> does exactly that.</p>
<p>R has two short-circuit operators:</p>
<ul>
<li><code>&amp;&amp;</code> is a short-circuited <code>&amp;</code></li>
<li><code>||</code> is a short-circuited <code>|</code></li>
</ul>
<p>These operators only evaluate the second argument if it is necessary to
determine the result. Here are some of these:</p>
<div class="sourceCode" id="cb332"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb332-1"><a href="data-structures.html#cb332-1" aria-hidden="true" tabindex="-1"></a><span class="cn">TRUE</span> <span class="sc">&amp;&amp;</span> <span class="cn">FALSE</span></span></code></pre></div>
<pre><code>## [1] FALSE</code></pre>
<div class="sourceCode" id="cb334"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb334-1"><a href="data-structures.html#cb334-1" aria-hidden="true" tabindex="-1"></a><span class="cn">TRUE</span> <span class="sc">&amp;&amp;</span> <span class="cn">TRUE</span></span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<div class="sourceCode" id="cb336"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb336-1"><a href="data-structures.html#cb336-1" aria-hidden="true" tabindex="-1"></a><span class="cn">TRUE</span> <span class="sc">||</span> <span class="cn">TRUE</span></span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<div class="sourceCode" id="cb338"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb338-1"><a href="data-structures.html#cb338-1" aria-hidden="true" tabindex="-1"></a><span class="fu">c</span>(<span class="cn">TRUE</span>, <span class="cn">FALSE</span>) <span class="sc">&amp;&amp;</span> <span class="fu">c</span>(<span class="cn">TRUE</span>, <span class="cn">TRUE</span>)</span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<p>For the final expression, notice R only combines the first element of each
vector. The others are ignored. In other words, the short-circuit operators are
<em>not</em> vectorized! Because of this, generally you <strong>should not use</strong> the
short-circuit operators for indexing. Their main use is in writing conditions
for if-statements, which we’ll learn about later on.</p>
</div>
</div>
<div id="indexing-lists" class="section level3" number="2.5.6">
<h3><span class="header-section-number">2.5.6</span> Indexing Lists</h3>
<p>Lists are a <em>container</em> for other types of R objects. When you select an
element from a list, you can either keep the container (the list) or discard
it. The indexing operator <code>[</code> almost always keeps containers.</p>
<p>As an example, let’s get some elements from a small list:</p>
<div class="sourceCode" id="cb340"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb340-1"><a href="data-structures.html#cb340-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">=</span> <span class="fu">list</span>(<span class="at">first =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>), <span class="at">second =</span> sin, <span class="at">third =</span> <span class="fu">c</span>(<span class="st">&quot;hi&quot;</span>, <span class="st">&quot;hello&quot;</span>))</span>
<span id="cb340-2"><a href="data-structures.html#cb340-2" aria-hidden="true" tabindex="-1"></a>y <span class="ot">=</span> x[<span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">3</span>)]</span>
<span id="cb340-3"><a href="data-structures.html#cb340-3" aria-hidden="true" tabindex="-1"></a>y</span></code></pre></div>
<pre><code>## $first
## [1] 1 2 3
## 
## $third
## [1] &quot;hi&quot;    &quot;hello&quot;</code></pre>
<div class="sourceCode" id="cb342"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb342-1"><a href="data-structures.html#cb342-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(y)</span></code></pre></div>
<pre><code>## [1] &quot;list&quot;</code></pre>
<p>The result is still a list. Even if we get just one element, the result of
indexing a list with <code>[</code> is a list:</p>
<div class="sourceCode" id="cb344"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb344-1"><a href="data-structures.html#cb344-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(x[<span class="dv">1</span>])</span></code></pre></div>
<pre><code>## [1] &quot;list&quot;</code></pre>
<p>Sometimes this will be exactly what we want. But what if we want to get the
first element of <code>x</code> so that we can use it in a vectorized function? Or in a
function that only accepts numeric arguments? We need to somehow get the
element and discard the container.</p>
<p>The solution to this problem is the <em>extraction operator</em> <code>[[</code>, which is also
called the <em>double square bracket operator</em>. The extraction operator is the
primary way to get and set elements of lists and other containers.</p>
<p>Unlike the indexing operator <code>[</code>, the extraction operator always discards the
container:</p>
<div class="sourceCode" id="cb346"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb346-1"><a href="data-structures.html#cb346-1" aria-hidden="true" tabindex="-1"></a>x[[<span class="dv">1</span>]]</span></code></pre></div>
<pre><code>## [1] 1 2 3</code></pre>
<div class="sourceCode" id="cb348"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb348-1"><a href="data-structures.html#cb348-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(x[[<span class="dv">1</span>]])</span></code></pre></div>
<pre><code>## [1] &quot;numeric&quot;</code></pre>
<p>The tradeoff is that the extraction operator can only get or set one element at
a time. Note that the element can be a vector, as above. Because it can only
get or set one element at a time, the extraction operator can only index by
position or name. Blank and logical indexes are not allowed.</p>
<p>The final difference between the index operator <code>[</code> and the extraction operator
<code>[[</code> has to do with how they handle invalid indexes. The index operator <code>[</code>
returns <code>NA</code> for invalid vector elements, and <code>NULL</code> for invalid list elements:</p>
<div class="sourceCode" id="cb350"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb350-1"><a href="data-structures.html#cb350-1" aria-hidden="true" tabindex="-1"></a><span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>)[<span class="dv">10</span>]</span></code></pre></div>
<pre><code>## [1] NA</code></pre>
<div class="sourceCode" id="cb352"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb352-1"><a href="data-structures.html#cb352-1" aria-hidden="true" tabindex="-1"></a>x[<span class="dv">10</span>]</span></code></pre></div>
<pre><code>## $&lt;NA&gt;
## NULL</code></pre>
<p>On the other hand, the extraction operator <code>[[</code> raises an error for invalid
elements:</p>
<div class="sourceCode" id="cb354"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb354-1"><a href="data-structures.html#cb354-1" aria-hidden="true" tabindex="-1"></a>x[[<span class="dv">10</span>]]</span></code></pre></div>
<pre><code>## Error in x[[10]]: subscript out of bounds</code></pre>
<p>The indexing operator <code>[</code> and the extraction operator <code>[[</code> both work with any
data structure that has elements. However, you’ll generally use the indexing
operator <code>[</code> to index vectors, and the extraction operator <code>[[</code> to index
containers (such as lists).</p>
</div>
<div id="indexing-data-frames" class="section level3" number="2.5.7">
<h3><span class="header-section-number">2.5.7</span> Indexing Data Frames</h3>
<p>For two-dimensional objects, like matrices and data frames, you can pass the
indexing operator <code>[</code> or the extraction operator <code>[[</code> a separate index for each
dimension. The rows come first:</p>
<pre><code>DATA[ROWS, COLUMNS]</code></pre>
<p>For instance, let’s get the first 3 rows and all columns of the earnings data:</p>
<div class="sourceCode" id="cb357"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb357-1"><a href="data-structures.html#cb357-1" aria-hidden="true" tabindex="-1"></a>earn[<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>, ]</span></code></pre></div>
<pre><code>##          sex      race ethnic_origin               age year quarter n_persons
## 1 Both Sexes All Races   All Origins 16 years and over 2010       1  96821000
## 2 Both Sexes All Races   All Origins 16 years and over 2010       2  99798000
## 3 Both Sexes All Races   All Origins 16 years and over 2010       3 101385000
##   median_weekly_earn
## 1                754
## 2                740
## 3                740</code></pre>
<p>As we saw in Section <a href="data-structures.html#all-elements">2.5.1</a>, leaving an index blank means all
elements.</p>
<p>As another example, let’s get the 3rd and 5th row, and the 2nd and 4th column:</p>
<div class="sourceCode" id="cb359"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb359-1"><a href="data-structures.html#cb359-1" aria-hidden="true" tabindex="-1"></a>earn[<span class="fu">c</span>(<span class="dv">3</span>, <span class="dv">5</span>), <span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">4</span>)]</span></code></pre></div>
<pre><code>##        race               age
## 3 All Races 16 years and over
## 5 All Races 16 years and over</code></pre>
<p>Mixing several different ways of indexing is allowed. So for example, we can
get the same above, but use column names instead of positions:</p>
<div class="sourceCode" id="cb361"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb361-1"><a href="data-structures.html#cb361-1" aria-hidden="true" tabindex="-1"></a>earn[<span class="fu">c</span>(<span class="dv">3</span>, <span class="dv">5</span>), <span class="fu">c</span>(<span class="st">&quot;race&quot;</span>, <span class="st">&quot;age&quot;</span>)]</span></code></pre></div>
<pre><code>##        race               age
## 3 All Races 16 years and over
## 5 All Races 16 years and over</code></pre>
<p>For data frames, it’s especially common to index the rows by condition and the
columns by name. For instance, let’s get the <code>sex</code>, <code>age</code>, and <code>n_persons</code>
columns for all rows that pertain to women:</p>
<div class="sourceCode" id="cb363"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb363-1"><a href="data-structures.html#cb363-1" aria-hidden="true" tabindex="-1"></a>result <span class="ot">=</span> earn[earn<span class="sc">$</span>sex <span class="sc">==</span> <span class="st">&quot;Women&quot;</span>, <span class="fu">c</span>(<span class="st">&quot;sex&quot;</span>, <span class="st">&quot;age&quot;</span>, <span class="st">&quot;n_persons&quot;</span>)]</span>
<span id="cb363-2"><a href="data-structures.html#cb363-2" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(result)</span></code></pre></div>
<pre><code>##      sex               age n_persons
## 89 Women 16 years and over  43794000
## 90 Women 16 years and over  44562000
## 91 Women 16 years and over  44912000
## 92 Women 16 years and over  44620000
## 93 Women 16 years and over  44077000
## 94 Women 16 years and over  44539000</code></pre>
<div id="the-drop-parameter" class="section level4 unnumbered">
<h4>The Drop Parameter</h4>
<p>If you use two-dimensional indexing with <code>[</code> to select exactly one column, you
get a vector:</p>
<div class="sourceCode" id="cb365"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb365-1"><a href="data-structures.html#cb365-1" aria-hidden="true" tabindex="-1"></a>result <span class="ot">=</span> earn[<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>, <span class="dv">2</span>]</span>
<span id="cb365-2"><a href="data-structures.html#cb365-2" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(result)</span></code></pre></div>
<pre><code>## [1] &quot;character&quot;</code></pre>
<p>The container is dropped, even though the indexing operator <code>[</code> usually keeps
containers. This also occurs for matrices. You can control this behavior with
the <code>drop</code> parameter:</p>
<div class="sourceCode" id="cb367"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb367-1"><a href="data-structures.html#cb367-1" aria-hidden="true" tabindex="-1"></a>result <span class="ot">=</span> earn[<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>, <span class="dv">2</span>, drop <span class="ot">=</span> <span class="cn">FALSE</span>]</span>
<span id="cb367-2"><a href="data-structures.html#cb367-2" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(result)</span></code></pre></div>
<pre><code>## [1] &quot;data.frame&quot;</code></pre>
<p>The default is <code>drop = TRUE</code>.</p>

</div>
</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="getting-started.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="exploring-your-data.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": false,
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/ucdavisdatalab/workshop_r_basics/edit/master/02_data-structures.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": "https://github.com/ucdavisdatalab/workshop_r_basics/blob/master/02_data-structures.Rmd",
"text": null
},
"download": null,
"toc": {
"collapse": "section"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
