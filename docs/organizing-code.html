<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>4 Organizing Code | R Basics</title>
  <meta name="description" content="4 Organizing Code | R Basics" />
  <meta name="generator" content="bookdown 0.29 and GitBook 2.6.7" />

  <meta property="og:title" content="4 Organizing Code | R Basics" />
  <meta property="og:type" content="book" />
  
  
  <meta name="github-repo" content="ucdavisdatalab/workshop_r-basics" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="4 Organizing Code | R Basics" />
  
  
  

<meta name="author" content="Nick Ulle" />
<meta name="author" content="Wesley Brooks" />


<meta name="date" content="2022-10-11" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="exploring-data.html"/>
<link rel="next" href="appendix.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="https://datalab.ucdavis.edu/">
  <img src="https://datalab.ucdavis.edu/wp-content/uploads/2019/07/datalab-logo-full-color-rgb-1.png" style="height: 100%; width: 100%; object-fit: contain" />
</a></li>
<li><a href="./" style="font-size: 18px">R Basics</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Overview</a></li>
<li class="chapter" data-level="1" data-path="getting-started.html"><a href="getting-started.html"><i class="fa fa-check"></i><b>1</b> Getting Started</a>
<ul>
<li class="chapter" data-level="1.1" data-path="getting-started.html"><a href="getting-started.html#prerequisites"><i class="fa fa-check"></i><b>1.1</b> Prerequisites</a></li>
<li class="chapter" data-level="1.2" data-path="getting-started.html"><a href="getting-started.html#the-r-interface"><i class="fa fa-check"></i><b>1.2</b> The R Interface</a>
<ul>
<li class="chapter" data-level="1.2.1" data-path="getting-started.html"><a href="getting-started.html#variables"><i class="fa fa-check"></i><b>1.2.1</b> Variables</a></li>
<li class="chapter" data-level="1.2.2" data-path="getting-started.html"><a href="getting-started.html#strings"><i class="fa fa-check"></i><b>1.2.2</b> Strings</a></li>
<li class="chapter" data-level="1.2.3" data-path="getting-started.html"><a href="getting-started.html#comparisons"><i class="fa fa-check"></i><b>1.2.3</b> Comparisons</a></li>
<li class="chapter" data-level="1.2.4" data-path="getting-started.html"><a href="getting-started.html#calling-functions"><i class="fa fa-check"></i><b>1.2.4</b> Calling Functions</a></li>
</ul></li>
<li class="chapter" data-level="1.3" data-path="getting-started.html"><a href="getting-started.html#getting-help"><i class="fa fa-check"></i><b>1.3</b> Getting Help</a>
<ul>
<li class="chapter" data-level="1.3.1" data-path="getting-started.html"><a href="getting-started.html#when-something-goes-wrong"><i class="fa fa-check"></i><b>1.3.1</b> When Something Goes Wrong</a></li>
</ul></li>
<li class="chapter" data-level="1.4" data-path="getting-started.html"><a href="getting-started.html#file-systems"><i class="fa fa-check"></i><b>1.4</b> File Systems</a>
<ul>
<li class="chapter" data-level="1.4.1" data-path="getting-started.html"><a href="getting-started.html#absolute-relative-paths"><i class="fa fa-check"></i><b>1.4.1</b> Absolute &amp; Relative Paths</a></li>
<li class="chapter" data-level="1.4.2" data-path="getting-started.html"><a href="getting-started.html#r-scripts"><i class="fa fa-check"></i><b>1.4.2</b> R Scripts</a></li>
<li class="chapter" data-level="1.4.3" data-path="getting-started.html"><a href="getting-started.html#the-working-directory"><i class="fa fa-check"></i><b>1.4.3</b> The Working Directory</a></li>
</ul></li>
<li class="chapter" data-level="1.5" data-path="getting-started.html"><a href="getting-started.html#reading-files"><i class="fa fa-check"></i><b>1.5</b> Reading Files</a>
<ul>
<li class="chapter" data-level="1.5.1" data-path="getting-started.html"><a href="getting-started.html#hello-data"><i class="fa fa-check"></i><b>1.5.1</b> Hello, Data!</a></li>
</ul></li>
<li class="chapter" data-level="1.6" data-path="getting-started.html"><a href="getting-started.html#data-frames"><i class="fa fa-check"></i><b>1.6</b> Data Frames</a>
<ul>
<li class="chapter" data-level="1.6.1" data-path="getting-started.html"><a href="getting-started.html#summarizing-data"><i class="fa fa-check"></i><b>1.6.1</b> Summarizing Data</a></li>
<li class="chapter" data-level="1.6.2" data-path="getting-started.html"><a href="getting-started.html#selecting-columns"><i class="fa fa-check"></i><b>1.6.2</b> Selecting Columns</a></li>
</ul></li>
<li class="chapter" data-level="1.7" data-path="getting-started.html"><a href="getting-started.html#exercises"><i class="fa fa-check"></i><b>1.7</b> Exercises</a>
<ul>
<li class="chapter" data-level="1.7.1" data-path="getting-started.html"><a href="getting-started.html#exercise"><i class="fa fa-check"></i><b>1.7.1</b> Exercise</a></li>
<li class="chapter" data-level="1.7.2" data-path="getting-started.html"><a href="getting-started.html#exercise-1"><i class="fa fa-check"></i><b>1.7.2</b> Exercise</a></li>
<li class="chapter" data-level="1.7.3" data-path="getting-started.html"><a href="getting-started.html#exercise-2"><i class="fa fa-check"></i><b>1.7.3</b> Exercise</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="data-structures.html"><a href="data-structures.html"><i class="fa fa-check"></i><b>2</b> Data Structures</a>
<ul>
<li class="chapter" data-level="2.1" data-path="data-structures.html"><a href="data-structures.html#vectors"><i class="fa fa-check"></i><b>2.1</b> Vectors</a>
<ul>
<li class="chapter" data-level="2.1.1" data-path="data-structures.html"><a href="data-structures.html#creating-vectors"><i class="fa fa-check"></i><b>2.1.1</b> Creating Vectors</a></li>
<li class="chapter" data-level="2.1.2" data-path="data-structures.html"><a href="data-structures.html#indexing-vectors"><i class="fa fa-check"></i><b>2.1.2</b> Indexing Vectors</a></li>
<li class="chapter" data-level="2.1.3" data-path="data-structures.html"><a href="data-structures.html#vectorization"><i class="fa fa-check"></i><b>2.1.3</b> Vectorization</a></li>
<li class="chapter" data-level="2.1.4" data-path="data-structures.html"><a href="data-structures.html#recycling"><i class="fa fa-check"></i><b>2.1.4</b> Recycling</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="data-structures.html"><a href="data-structures.html#data-types-classes"><i class="fa fa-check"></i><b>2.2</b> Data Types &amp; Classes</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="data-structures.html"><a href="data-structures.html#lists"><i class="fa fa-check"></i><b>2.2.1</b> Lists</a></li>
<li class="chapter" data-level="2.2.2" data-path="data-structures.html"><a href="data-structures.html#implicit-coercion"><i class="fa fa-check"></i><b>2.2.2</b> Implicit Coercion</a></li>
<li class="chapter" data-level="2.2.3" data-path="data-structures.html"><a href="data-structures.html#matrices-arrays"><i class="fa fa-check"></i><b>2.2.3</b> Matrices &amp; Arrays</a></li>
<li class="chapter" data-level="2.2.4" data-path="data-structures.html"><a href="data-structures.html#factors"><i class="fa fa-check"></i><b>2.2.4</b> Factors</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="data-structures.html"><a href="data-structures.html#special-values"><i class="fa fa-check"></i><b>2.3</b> Special Values</a>
<ul>
<li class="chapter" data-level="2.3.1" data-path="data-structures.html"><a href="data-structures.html#missing-values"><i class="fa fa-check"></i><b>2.3.1</b> Missing Values</a></li>
<li class="chapter" data-level="2.3.2" data-path="data-structures.html"><a href="data-structures.html#infinity"><i class="fa fa-check"></i><b>2.3.2</b> Infinity</a></li>
<li class="chapter" data-level="2.3.3" data-path="data-structures.html"><a href="data-structures.html#not-a-number"><i class="fa fa-check"></i><b>2.3.3</b> Not a Number</a></li>
<li class="chapter" data-level="2.3.4" data-path="data-structures.html"><a href="data-structures.html#null"><i class="fa fa-check"></i><b>2.3.4</b> Null</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="data-structures.html"><a href="data-structures.html#indexing"><i class="fa fa-check"></i><b>2.4</b> Indexing</a>
<ul>
<li class="chapter" data-level="2.4.1" data-path="data-structures.html"><a href="data-structures.html#all-elements"><i class="fa fa-check"></i><b>2.4.1</b> All Elements</a></li>
<li class="chapter" data-level="2.4.2" data-path="data-structures.html"><a href="data-structures.html#by-position"><i class="fa fa-check"></i><b>2.4.2</b> By Position</a></li>
<li class="chapter" data-level="2.4.3" data-path="data-structures.html"><a href="data-structures.html#by-name"><i class="fa fa-check"></i><b>2.4.3</b> By Name</a></li>
<li class="chapter" data-level="2.4.4" data-path="data-structures.html"><a href="data-structures.html#by-condition"><i class="fa fa-check"></i><b>2.4.4</b> By Condition</a></li>
<li class="chapter" data-level="2.4.5" data-path="data-structures.html"><a href="data-structures.html#logic"><i class="fa fa-check"></i><b>2.4.5</b> Logic</a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="data-structures.html"><a href="data-structures.html#exercises-1"><i class="fa fa-check"></i><b>2.5</b> Exercises</a>
<ul>
<li class="chapter" data-level="2.5.1" data-path="data-structures.html"><a href="data-structures.html#exercise-3"><i class="fa fa-check"></i><b>2.5.1</b> Exercise</a></li>
<li class="chapter" data-level="2.5.2" data-path="data-structures.html"><a href="data-structures.html#exercise-4"><i class="fa fa-check"></i><b>2.5.2</b> Exercise</a></li>
<li class="chapter" data-level="2.5.3" data-path="data-structures.html"><a href="data-structures.html#exercise-5"><i class="fa fa-check"></i><b>2.5.3</b> Exercise</a></li>
<li class="chapter" data-level="2.5.4" data-path="data-structures.html"><a href="data-structures.html#exercise-6"><i class="fa fa-check"></i><b>2.5.4</b> Exercise</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="exploring-data.html"><a href="exploring-data.html"><i class="fa fa-check"></i><b>3</b> Exploring Data</a>
<ul>
<li class="chapter" data-level="3.1" data-path="exploring-data.html"><a href="exploring-data.html#indexing-data-frames"><i class="fa fa-check"></i><b>3.1</b> Indexing Data Frames</a>
<ul>
<li class="chapter" data-level="3.1.1" data-path="exploring-data.html"><a href="exploring-data.html#indexing-lists"><i class="fa fa-check"></i><b>3.1.1</b> Indexing Lists</a></li>
<li class="chapter" data-level="3.1.2" data-path="exploring-data.html"><a href="exploring-data.html#two-dimensional-indexing"><i class="fa fa-check"></i><b>3.1.2</b> Two-dimensional Indexing</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="exploring-data.html"><a href="exploring-data.html#packages"><i class="fa fa-check"></i><b>3.2</b> Packages</a></li>
<li class="chapter" data-level="3.3" data-path="exploring-data.html"><a href="exploring-data.html#data-visualization"><i class="fa fa-check"></i><b>3.3</b> Data Visualization</a>
<ul>
<li class="chapter" data-level="3.3.1" data-path="exploring-data.html"><a href="exploring-data.html#layer-1-data"><i class="fa fa-check"></i><b>3.3.1</b> Layer 1: Data</a></li>
<li class="chapter" data-level="3.3.2" data-path="exploring-data.html"><a href="exploring-data.html#layer-2-geometry"><i class="fa fa-check"></i><b>3.3.2</b> Layer 2: Geometry</a></li>
<li class="chapter" data-level="3.3.3" data-path="exploring-data.html"><a href="exploring-data.html#layer-3-aesthetics"><i class="fa fa-check"></i><b>3.3.3</b> Layer 3: Aesthetics</a></li>
<li class="chapter" data-level="3.3.4" data-path="exploring-data.html"><a href="exploring-data.html#layer-4-scales"><i class="fa fa-check"></i><b>3.3.4</b> Layer 4: Scales</a></li>
<li class="chapter" data-level="3.3.5" data-path="exploring-data.html"><a href="exploring-data.html#saving-plots"><i class="fa fa-check"></i><b>3.3.5</b> Saving Plots</a></li>
<li class="chapter" data-level="3.3.6" data-path="exploring-data.html"><a href="exploring-data.html#example-bar-plot"><i class="fa fa-check"></i><b>3.3.6</b> Example: Bar Plot</a></li>
<li class="chapter" data-level="3.3.7" data-path="exploring-data.html"><a href="exploring-data.html#visualization-design"><i class="fa fa-check"></i><b>3.3.7</b> Visualization Design</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="exploring-data.html"><a href="exploring-data.html#apply-functions"><i class="fa fa-check"></i><b>3.4</b> Apply Functions</a>
<ul>
<li class="chapter" data-level="3.4.1" data-path="exploring-data.html"><a href="exploring-data.html#the-sapply-function"><i class="fa fa-check"></i><b>3.4.1</b> The <code>sapply</code> Function</a></li>
<li class="chapter" data-level="3.4.2" data-path="exploring-data.html"><a href="exploring-data.html#the-split-apply-pattern"><i class="fa fa-check"></i><b>3.4.2</b> The Split-Apply Pattern</a></li>
</ul></li>
<li class="chapter" data-level="3.5" data-path="exploring-data.html"><a href="exploring-data.html#exercises-2"><i class="fa fa-check"></i><b>3.5</b> Exercises</a>
<ul>
<li class="chapter" data-level="3.5.1" data-path="exploring-data.html"><a href="exploring-data.html#exercise-7"><i class="fa fa-check"></i><b>3.5.1</b> Exercise</a></li>
<li class="chapter" data-level="3.5.2" data-path="exploring-data.html"><a href="exploring-data.html#exercise-8"><i class="fa fa-check"></i><b>3.5.2</b> Exercise</a></li>
<li class="chapter" data-level="3.5.3" data-path="exploring-data.html"><a href="exploring-data.html#exercise-9"><i class="fa fa-check"></i><b>3.5.3</b> Exercise</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="organizing-code.html"><a href="organizing-code.html"><i class="fa fa-check"></i><b>4</b> Organizing Code</a>
<ul>
<li class="chapter" data-level="4.1" data-path="organizing-code.html"><a href="organizing-code.html#conditional-expressions"><i class="fa fa-check"></i><b>4.1</b> Conditional Expressions</a></li>
<li class="chapter" data-level="4.2" data-path="organizing-code.html"><a href="organizing-code.html#functions"><i class="fa fa-check"></i><b>4.2</b> Functions</a>
<ul>
<li class="chapter" data-level="4.2.1" data-path="organizing-code.html"><a href="organizing-code.html#returning-values"><i class="fa fa-check"></i><b>4.2.1</b> Returning Values</a></li>
<li class="chapter" data-level="4.2.2" data-path="organizing-code.html"><a href="organizing-code.html#planning-your-functions"><i class="fa fa-check"></i><b>4.2.2</b> Planning Your Functions</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="organizing-code.html"><a href="organizing-code.html#exercises-3"><i class="fa fa-check"></i><b>4.3</b> Exercises</a>
<ul>
<li class="chapter" data-level="4.3.1" data-path="organizing-code.html"><a href="organizing-code.html#exercise-10"><i class="fa fa-check"></i><b>4.3.1</b> Exercise</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="appendix.html"><a href="appendix.html"><i class="fa fa-check"></i><b>5</b> Appendix</a>
<ul>
<li class="chapter" data-level="5.1" data-path="appendix.html"><a href="appendix.html#more-about-comparisons"><i class="fa fa-check"></i><b>5.1</b> More About Comparisons</a>
<ul>
<li class="chapter" data-level="5.1.1" data-path="appendix.html"><a href="appendix.html#equality"><i class="fa fa-check"></i><b>5.1.1</b> Equality</a></li>
<li class="chapter" data-level="5.1.2" data-path="appendix.html"><a href="appendix.html#the-in-operator"><i class="fa fa-check"></i><b>5.1.2</b> The <code>%in%</code> Operator</a></li>
<li class="chapter" data-level="5.1.3" data-path="appendix.html"><a href="appendix.html#summarizing-comparisons"><i class="fa fa-check"></i><b>5.1.3</b> Summarizing Comparisons</a></li>
<li class="chapter" data-level="5.1.4" data-path="appendix.html"><a href="appendix.html#other-pitfalls"><i class="fa fa-check"></i><b>5.1.4</b> Other Pitfalls</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="appendix.html"><a href="appendix.html#the-drop-parameter"><i class="fa fa-check"></i><b>5.2</b> The <code>drop</code> Parameter</a></li>
<li class="chapter" data-level="5.3" data-path="appendix.html"><a href="appendix.html#variable-scope-lookup"><i class="fa fa-check"></i><b>5.3</b> Variable Scope &amp; Lookup</a>
<ul>
<li class="chapter" data-level="5.3.1" data-path="appendix.html"><a href="appendix.html#local-variables"><i class="fa fa-check"></i><b>5.3.1</b> Local Variables</a></li>
<li class="chapter" data-level="5.3.2" data-path="appendix.html"><a href="appendix.html#lexical-scoping"><i class="fa fa-check"></i><b>5.3.2</b> Lexical Scoping</a></li>
<li class="chapter" data-level="5.3.3" data-path="appendix.html"><a href="appendix.html#dynamic-lookup"><i class="fa fa-check"></i><b>5.3.3</b> Dynamic Lookup</a></li>
<li class="chapter" data-level="5.3.4" data-path="appendix.html"><a href="appendix.html#summary"><i class="fa fa-check"></i><b>5.3.4</b> Summary</a></li>
</ul></li>
<li class="chapter" data-level="5.4" data-path="appendix.html"><a href="appendix.html#loops"><i class="fa fa-check"></i><b>5.4</b> Loops</a>
<ul>
<li class="chapter" data-level="5.4.1" data-path="appendix.html"><a href="appendix.html#for-loops"><i class="fa fa-check"></i><b>5.4.1</b> For-loops</a></li>
<li class="chapter" data-level="5.4.2" data-path="appendix.html"><a href="appendix.html#while-loops"><i class="fa fa-check"></i><b>5.4.2</b> While-loops</a></li>
<li class="chapter" data-level="5.4.3" data-path="appendix.html"><a href="appendix.html#saving-multiple-results"><i class="fa fa-check"></i><b>5.4.3</b> Saving Multiple Results</a></li>
<li class="chapter" data-level="5.4.4" data-path="appendix.html"><a href="appendix.html#break-next"><i class="fa fa-check"></i><b>5.4.4</b> Break &amp; Next</a></li>
<li class="chapter" data-level="5.4.5" data-path="appendix.html"><a href="appendix.html#example-the-collatz-conjecture"><i class="fa fa-check"></i><b>5.4.5</b> Example: The Collatz Conjecture</a></li>
</ul></li>
<li class="chapter" data-level="5.5" data-path="appendix.html"><a href="appendix.html#planning-for-iteration"><i class="fa fa-check"></i><b>5.5</b> Planning for Iteration</a></li>
<li class="chapter" data-level="5.6" data-path="appendix.html"><a href="appendix.html#string-processing"><i class="fa fa-check"></i><b>5.6</b> String Processing</a>
<ul>
<li class="chapter" data-level="5.6.1" data-path="appendix.html"><a href="appendix.html#splitting-strings"><i class="fa fa-check"></i><b>5.6.1</b> Splitting Strings</a></li>
<li class="chapter" data-level="5.6.2" data-path="appendix.html"><a href="appendix.html#replacing-parts-of-strings"><i class="fa fa-check"></i><b>5.6.2</b> Replacing Parts of Strings</a></li>
</ul></li>
<li class="chapter" data-level="5.7" data-path="appendix.html"><a href="appendix.html#date-processing"><i class="fa fa-check"></i><b>5.7</b> Date Processing</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="where-to-learn-more.html"><a href="where-to-learn-more.html"><i class="fa fa-check"></i>Where to Learn More</a></li>
<li class="chapter" data-level="" data-path="acknowledgements.html"><a href="acknowledgements.html"><i class="fa fa-check"></i>Acknowledgements</a>
<ul>
<li class="chapter" data-level="" data-path="acknowledgements.html"><a href="acknowledgements.html#nicks-acknowledgements"><i class="fa fa-check"></i>Nick’s Acknowledgements</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="assessment.html"><a href="assessment.html"><i class="fa fa-check"></i>Assessment</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">R Basics</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="organizing-code" class="section level1 hasAnchor" number="4">
<h1><span class="header-section-number">4</span> Organizing Code<a href="organizing-code.html#organizing-code" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p>By now, you’ve learned all of the basic skills necessary to explore a data set
in R. The focus of this chapter is how to organize your code so that it’s
concise, clear, and easy to automate. This will help you and your collaborators
avoid tedious, redundant work, reproduce results efficiently, and run code in
specialized environments for scientific computing, such as high-performance
computing clusters.</p>
<div id="learning-objectives-3" class="section level4 unnumbered hasAnchor">
<h4>Learning Objectives<a href="organizing-code.html#learning-objectives-3" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<ul>
<li>Create code that only runs when a condition is satisfied</li>
<li>Create custom functions in order to organize and reuse code</li>
</ul>
</div>
<div id="conditional-expressions" class="section level2 hasAnchor" number="4.1">
<h2><span class="header-section-number">4.1</span> Conditional Expressions<a href="organizing-code.html#conditional-expressions" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Sometimes you’ll need code to do different things, depending on a condition.
<em>If-statements</em> provide a way to write conditional code.</p>
<p>For example, suppose we want to greet one person differently from the others:</p>
<div class="sourceCode" id="cb436"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb436-1"><a href="organizing-code.html#cb436-1" aria-hidden="true" tabindex="-1"></a>name <span class="ot">=</span> <span class="st">&quot;Nick&quot;</span></span>
<span id="cb436-2"><a href="organizing-code.html#cb436-2" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (name <span class="sc">==</span> <span class="st">&quot;Nick&quot;</span>) {</span>
<span id="cb436-3"><a href="organizing-code.html#cb436-3" aria-hidden="true" tabindex="-1"></a>   <span class="co"># If name is Nick:</span></span>
<span id="cb436-4"><a href="organizing-code.html#cb436-4" aria-hidden="true" tabindex="-1"></a>   <span class="fu">message</span>(<span class="st">&quot;We went down the TRUE branch&quot;</span>)</span>
<span id="cb436-5"><a href="organizing-code.html#cb436-5" aria-hidden="true" tabindex="-1"></a>   msg <span class="ot">=</span> <span class="st">&quot;Hi Nick, nice to see you again!&quot;</span></span>
<span id="cb436-6"><a href="organizing-code.html#cb436-6" aria-hidden="true" tabindex="-1"></a>} <span class="cf">else</span> {</span>
<span id="cb436-7"><a href="organizing-code.html#cb436-7" aria-hidden="true" tabindex="-1"></a>   <span class="co"># Anything else:</span></span>
<span id="cb436-8"><a href="organizing-code.html#cb436-8" aria-hidden="true" tabindex="-1"></a>   msg <span class="ot">=</span> <span class="st">&quot;Nice to meet you!&quot;</span></span>
<span id="cb436-9"><a href="organizing-code.html#cb436-9" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<pre><code>## We went down the TRUE branch</code></pre>
<p>Indent code inside of the if-statement by 2 or 4 spaces. Indentation makes your
code easier to read.</p>
<p>The condition in an if-statement has to be a scalar:</p>
<div class="sourceCode" id="cb438"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb438-1"><a href="organizing-code.html#cb438-1" aria-hidden="true" tabindex="-1"></a>name <span class="ot">=</span> <span class="fu">c</span>(<span class="st">&quot;Nick&quot;</span>, <span class="st">&quot;Susan&quot;</span>)</span>
<span id="cb438-2"><a href="organizing-code.html#cb438-2" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (name <span class="sc">==</span> <span class="st">&quot;Nick&quot;</span>) {</span>
<span id="cb438-3"><a href="organizing-code.html#cb438-3" aria-hidden="true" tabindex="-1"></a>   msg <span class="ot">=</span> <span class="st">&quot;Hi Nick!&quot;</span></span>
<span id="cb438-4"><a href="organizing-code.html#cb438-4" aria-hidden="true" tabindex="-1"></a>} <span class="cf">else</span> {</span>
<span id="cb438-5"><a href="organizing-code.html#cb438-5" aria-hidden="true" tabindex="-1"></a>   msg <span class="ot">=</span> <span class="st">&quot;Nice to meet you!&quot;</span></span>
<span id="cb438-6"><a href="organizing-code.html#cb438-6" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<pre><code>## Error in if (name == &quot;Nick&quot;) {: the condition has length &gt; 1</code></pre>
<p>You can chain together if-statements:</p>
<div class="sourceCode" id="cb440"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb440-1"><a href="organizing-code.html#cb440-1" aria-hidden="true" tabindex="-1"></a>name <span class="ot">=</span> <span class="st">&quot;Susan&quot;</span></span>
<span id="cb440-2"><a href="organizing-code.html#cb440-2" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (name <span class="sc">==</span> <span class="st">&quot;Nick&quot;</span>) {</span>
<span id="cb440-3"><a href="organizing-code.html#cb440-3" aria-hidden="true" tabindex="-1"></a>   msg <span class="ot">=</span> <span class="st">&quot;Hi Nick, nice to see you again!&quot;</span></span>
<span id="cb440-4"><a href="organizing-code.html#cb440-4" aria-hidden="true" tabindex="-1"></a>} <span class="cf">else</span> <span class="cf">if</span> (name <span class="sc">==</span> <span class="st">&quot;Peter&quot;</span>) {</span>
<span id="cb440-5"><a href="organizing-code.html#cb440-5" aria-hidden="true" tabindex="-1"></a>   msg <span class="ot">=</span> <span class="st">&quot;Go away Peter, I&#39;m busy!&quot;</span></span>
<span id="cb440-6"><a href="organizing-code.html#cb440-6" aria-hidden="true" tabindex="-1"></a>} <span class="cf">else</span> {</span>
<span id="cb440-7"><a href="organizing-code.html#cb440-7" aria-hidden="true" tabindex="-1"></a>   msg <span class="ot">=</span> <span class="st">&quot;Nice to meet you!&quot;</span></span>
<span id="cb440-8"><a href="organizing-code.html#cb440-8" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb440-9"><a href="organizing-code.html#cb440-9" aria-hidden="true" tabindex="-1"></a>msg</span></code></pre></div>
<pre><code>## [1] &quot;Nice to meet you!&quot;</code></pre>
<p>If-statements return the value of the last expression in the evaluated block:</p>
<div class="sourceCode" id="cb442"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb442-1"><a href="organizing-code.html#cb442-1" aria-hidden="true" tabindex="-1"></a>name <span class="ot">=</span> <span class="st">&quot;Tom&quot;</span></span>
<span id="cb442-2"><a href="organizing-code.html#cb442-2" aria-hidden="true" tabindex="-1"></a>msg <span class="ot">=</span> <span class="cf">if</span> (name <span class="sc">==</span> <span class="st">&quot;Nick&quot;</span>) {</span>
<span id="cb442-3"><a href="organizing-code.html#cb442-3" aria-hidden="true" tabindex="-1"></a>   <span class="st">&quot;Hi Nick, nice to see you again!&quot;</span></span>
<span id="cb442-4"><a href="organizing-code.html#cb442-4" aria-hidden="true" tabindex="-1"></a>} <span class="cf">else</span> {</span>
<span id="cb442-5"><a href="organizing-code.html#cb442-5" aria-hidden="true" tabindex="-1"></a>   <span class="st">&quot;Nice to meet you!&quot;</span></span>
<span id="cb442-6"><a href="organizing-code.html#cb442-6" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb442-7"><a href="organizing-code.html#cb442-7" aria-hidden="true" tabindex="-1"></a>msg</span></code></pre></div>
<pre><code>## [1] &quot;Nice to meet you!&quot;</code></pre>
<p>Curly braces <code>{ }</code> are optional for single-line expressions:</p>
<div class="sourceCode" id="cb444"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb444-1"><a href="organizing-code.html#cb444-1" aria-hidden="true" tabindex="-1"></a>name <span class="ot">=</span> <span class="st">&quot;Nick&quot;</span></span>
<span id="cb444-2"><a href="organizing-code.html#cb444-2" aria-hidden="true" tabindex="-1"></a>msg <span class="ot">=</span> <span class="cf">if</span> (name <span class="sc">==</span> <span class="st">&quot;Nick&quot;</span>) <span class="st">&quot;Hi Nick, nice to see you again!&quot;</span> <span class="cf">else</span></span>
<span id="cb444-3"><a href="organizing-code.html#cb444-3" aria-hidden="true" tabindex="-1"></a>   <span class="st">&quot;Nice to meet you!&quot;</span></span>
<span id="cb444-4"><a href="organizing-code.html#cb444-4" aria-hidden="true" tabindex="-1"></a>msg</span></code></pre></div>
<pre><code>## [1] &quot;Hi Nick, nice to see you again!&quot;</code></pre>
<p>But you have to be careful if you don’t use them:</p>
<div class="sourceCode" id="cb446"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb446-1"><a href="organizing-code.html#cb446-1" aria-hidden="true" tabindex="-1"></a><span class="co"># NO GOOD:</span></span>
<span id="cb446-2"><a href="organizing-code.html#cb446-2" aria-hidden="true" tabindex="-1"></a>msg <span class="ot">=</span> <span class="cf">if</span> (name <span class="sc">==</span> <span class="st">&quot;Nick&quot;</span>)</span>
<span id="cb446-3"><a href="organizing-code.html#cb446-3" aria-hidden="true" tabindex="-1"></a>   <span class="st">&quot;Hi Nick, nice to see you again!&quot;</span></span>
<span id="cb446-4"><a href="organizing-code.html#cb446-4" aria-hidden="true" tabindex="-1"></a><span class="cf">else</span></span>
<span id="cb446-5"><a href="organizing-code.html#cb446-5" aria-hidden="true" tabindex="-1"></a>   <span class="st">&quot;Nice to meet you!&quot;</span></span></code></pre></div>
<pre><code>## Error: &lt;text&gt;:4:1: unexpected &#39;else&#39;
## 3:    &quot;Hi Nick, nice to see you again!&quot;
## 4: else
##    ^</code></pre>
<p>The <code>else</code> block is optional:</p>
<div class="sourceCode" id="cb448"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb448-1"><a href="organizing-code.html#cb448-1" aria-hidden="true" tabindex="-1"></a>msg <span class="ot">=</span> <span class="st">&quot;Hi&quot;</span></span>
<span id="cb448-2"><a href="organizing-code.html#cb448-2" aria-hidden="true" tabindex="-1"></a>name <span class="ot">=</span> <span class="st">&quot;Tom&quot;</span></span>
<span id="cb448-3"><a href="organizing-code.html#cb448-3" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (name <span class="sc">==</span> <span class="st">&quot;Nick&quot;</span>)</span>
<span id="cb448-4"><a href="organizing-code.html#cb448-4" aria-hidden="true" tabindex="-1"></a>   msg <span class="ot">=</span> <span class="st">&quot;Hi Nick, nice to see you again!&quot;</span></span>
<span id="cb448-5"><a href="organizing-code.html#cb448-5" aria-hidden="true" tabindex="-1"></a>msg</span></code></pre></div>
<pre><code>## [1] &quot;Hi&quot;</code></pre>
<p>When there’s no <code>else</code> block, the value of the <code>else</code> block is <code>NULL</code>:</p>
<div class="sourceCode" id="cb450"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb450-1"><a href="organizing-code.html#cb450-1" aria-hidden="true" tabindex="-1"></a>name <span class="ot">=</span> <span class="st">&quot;Tom&quot;</span></span>
<span id="cb450-2"><a href="organizing-code.html#cb450-2" aria-hidden="true" tabindex="-1"></a>msg <span class="ot">=</span> <span class="cf">if</span> (name <span class="sc">==</span> <span class="st">&quot;Nick&quot;</span>)</span>
<span id="cb450-3"><a href="organizing-code.html#cb450-3" aria-hidden="true" tabindex="-1"></a>   <span class="st">&quot;Hi Nick, nice to see you again!&quot;</span></span>
<span id="cb450-4"><a href="organizing-code.html#cb450-4" aria-hidden="true" tabindex="-1"></a>msg</span></code></pre></div>
<pre><code>## NULL</code></pre>
</div>
<div id="functions" class="section level2 hasAnchor" number="4.2">
<h2><span class="header-section-number">4.2</span> Functions<a href="organizing-code.html#functions" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>The main way to interact with R is by calling functions, which was first
explained way back in Section <a href="getting-started.html#calling-functions">1.2.4</a>. Since then, you’ve
learned how to use many of R’s built-in functions. This section explains how
you can write your own functions.</p>
<p>To start, let’s briefly review what functions are, and some of the jargon
associated with them. It’s useful to think of functions as factories: raw
materials (inputs) go in, products (outputs) come out. We can also represent
this visually:</p>
<p><img src="img/functions.png"></p>
<p>Programmers use several specific terms to describe the parts and usage of
functions:</p>
<ul>
<li><em>Parameters</em> are placeholder variables for inputs.
<ul>
<li><em>Arguments</em> are the actual values assigned to the parameters in a call.</li>
</ul></li>
<li>The <em>return value</em> is the output.</li>
<li>The <em>body</em> is the code inside.</li>
<li><em>Calling</em> a function means using a function to compute something.</li>
</ul>
<p>Almost every command in R is a function, even the arithmetic operators and the
parentheses! You can view the body of a function by typing its name without
trailing parentheses (in contrast to how you call functions). The body of a
function is usually surrounded by curly braces <code>{}</code>, although they’re optional
if the body only contains one line of code. Indenting code inside of curly
braces by 2-4 spaces also helps make it visually distinct from other code.</p>
<p>For example, let’s look at the body of the <code>append</code> function, which appends a
value to the end of a list or vector:</p>
<div class="sourceCode" id="cb452"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb452-1"><a href="organizing-code.html#cb452-1" aria-hidden="true" tabindex="-1"></a>append</span></code></pre></div>
<pre><code>## function (x, values, after = length(x)) 
## {
##     lengx &lt;- length(x)
##     if (!after) 
##         c(values, x)
##     else if (after &gt;= lengx) 
##         c(x, values)
##     else c(x[1L:after], values, x[(after + 1L):lengx])
## }
## &lt;bytecode: 0x56488e6b4b68&gt;
## &lt;environment: namespace:base&gt;</code></pre>
<p>Don’t worry if you can’t understand everything the <code>append</code> function’s code
does yet. It will make more sense later on, after you’ve written a few
functions of your own.</p>
<p>Many of R’s built-in functions are not entirely written in R code. You can spot
these by calls to the special <code>.Primitive</code> or <code>.Internal</code> functions in their
code.</p>
<p>For instance, the <code>sum</code> function is not written in R code:</p>
<div class="sourceCode" id="cb454"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb454-1"><a href="organizing-code.html#cb454-1" aria-hidden="true" tabindex="-1"></a>sum</span></code></pre></div>
<pre><code>## function (..., na.rm = FALSE)  .Primitive(&quot;sum&quot;)</code></pre>
<p>The <code>function</code> keyword creates a new function. Here’s the syntax:</p>
<pre><code>function(parameter1, parameter2, ...) {
  # Your code goes here

  # The result goes here
}</code></pre>
<p>A function can have any number of parameters, and will automatically return the
value of the last line of its body.</p>
<p>A function is a value, and like any other value, if you want to reuse it, you
need to assign it to variable. Choosing descriptive variable names is a good
habit. For functions, that means choosing a name that describes what the
function does. It often makes sense to use verbs in function names.</p>
<p>Let’s write a function that gets the largest values in a vector. The inputs or
arguments to the function will be the vector in question and also the number of
values to get. Let’s call these <code>vec</code> and <code>n</code>, respectively. The result will be
a vector of the <code>n</code> largest elements. Here’s one way to write the function:</p>
<div class="sourceCode" id="cb457"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb457-1"><a href="organizing-code.html#cb457-1" aria-hidden="true" tabindex="-1"></a>get_largest <span class="ot">=</span> <span class="cf">function</span>(vec, n) {</span>
<span id="cb457-2"><a href="organizing-code.html#cb457-2" aria-hidden="true" tabindex="-1"></a>  sorted <span class="ot">=</span> <span class="fu">sort</span>(vec, <span class="at">decreasing =</span> <span class="cn">TRUE</span>)</span>
<span id="cb457-3"><a href="organizing-code.html#cb457-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>(sorted, n)</span>
<span id="cb457-4"><a href="organizing-code.html#cb457-4" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>The name of the function, <code>get_largest</code>, describes what the function does and
includes a verb. If this function will be used frequently, a shorter name, such
as <code>largest</code>, might be preferable (compare to the <code>head</code> function).</p>
<p>Any time you write a function, the first thing you should do afterwards is test
that it actually works. Let’s try the <code>get_largest</code> function on a few test
cases:</p>
<div class="sourceCode" id="cb458"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb458-1"><a href="organizing-code.html#cb458-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">=</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">10</span>, <span class="dv">20</span>, <span class="sc">-</span><span class="dv">3</span>)</span>
<span id="cb458-2"><a href="organizing-code.html#cb458-2" aria-hidden="true" tabindex="-1"></a><span class="fu">get_largest</span>(x, <span class="dv">2</span>)</span></code></pre></div>
<pre><code>## [1] 20 10</code></pre>
<div class="sourceCode" id="cb460"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb460-1"><a href="organizing-code.html#cb460-1" aria-hidden="true" tabindex="-1"></a><span class="fu">get_largest</span>(x, <span class="dv">3</span>)</span></code></pre></div>
<pre><code>## [1] 20 10  1</code></pre>
<div class="sourceCode" id="cb462"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb462-1"><a href="organizing-code.html#cb462-1" aria-hidden="true" tabindex="-1"></a>y <span class="ot">=</span> <span class="fu">c</span>(<span class="sc">-</span><span class="dv">1</span>, <span class="sc">-</span><span class="dv">2</span>, <span class="sc">-</span><span class="dv">3</span>)</span>
<span id="cb462-2"><a href="organizing-code.html#cb462-2" aria-hidden="true" tabindex="-1"></a><span class="fu">get_largest</span>(y, <span class="dv">2</span>)</span></code></pre></div>
<pre><code>## [1] -1 -2</code></pre>
<div class="sourceCode" id="cb464"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb464-1"><a href="organizing-code.html#cb464-1" aria-hidden="true" tabindex="-1"></a>z <span class="ot">=</span> <span class="fu">c</span>(<span class="st">&quot;d&quot;</span>, <span class="st">&quot;a&quot;</span>, <span class="st">&quot;t&quot;</span>, <span class="st">&quot;a&quot;</span>, <span class="st">&quot;l&quot;</span>, <span class="st">&quot;a&quot;</span>, <span class="st">&quot;b&quot;</span>)</span>
<span id="cb464-2"><a href="organizing-code.html#cb464-2" aria-hidden="true" tabindex="-1"></a><span class="fu">get_largest</span>(z, <span class="dv">3</span>)</span></code></pre></div>
<pre><code>## [1] &quot;t&quot; &quot;l&quot; &quot;d&quot;</code></pre>
<p>Notice that the parameters <code>vec</code> and <code>n</code> inside the function do not exist as
variables outside of the function:</p>
<div class="sourceCode" id="cb466"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb466-1"><a href="organizing-code.html#cb466-1" aria-hidden="true" tabindex="-1"></a>vec</span></code></pre></div>
<pre><code>## Error in eval(expr, envir, enclos): object &#39;vec&#39; not found</code></pre>
<p>In general, R keeps parameters and variables you define inside of a function
separate from variables you define outside of a function. You can read more
about the specific rules for how R searches for variables in Section
<a href="appendix.html#variable-scope-lookup">5.3</a>.</p>
<p>As a function for quickly summarizing data, <code>get_largest</code> would be more
convenient if the parameter <code>n</code> for the number of values to return was optional
(again, compare to the <code>head</code> function). You can make the parameter <code>n</code>
optional by setting a <em>default argument</em>: an argument assigned to the parameter
if no argument is assigned in the call to the function. You can use <code>=</code> to
assign default arguments to parameters when you define a function with the
<code>function</code> keyword. Here’s a new definition of the function with the default <code>n = 5</code>:</p>
<div class="sourceCode" id="cb468"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb468-1"><a href="organizing-code.html#cb468-1" aria-hidden="true" tabindex="-1"></a>get_largest <span class="ot">=</span> <span class="cf">function</span>(vec, <span class="at">n =</span> <span class="dv">5</span>) {</span>
<span id="cb468-2"><a href="organizing-code.html#cb468-2" aria-hidden="true" tabindex="-1"></a>  sorted <span class="ot">=</span> <span class="fu">sort</span>(vec, <span class="at">decreasing =</span> <span class="cn">TRUE</span>)</span>
<span id="cb468-3"><a href="organizing-code.html#cb468-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>(sorted, n)</span>
<span id="cb468-4"><a href="organizing-code.html#cb468-4" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>After making this change, it’s a good idea to test the function again:</p>
<div class="sourceCode" id="cb469"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb469-1"><a href="organizing-code.html#cb469-1" aria-hidden="true" tabindex="-1"></a><span class="fu">get_largest</span>(x)</span></code></pre></div>
<pre><code>## [1] 20 10  1 -3</code></pre>
<div class="sourceCode" id="cb471"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb471-1"><a href="organizing-code.html#cb471-1" aria-hidden="true" tabindex="-1"></a><span class="fu">get_largest</span>(y)</span></code></pre></div>
<pre><code>## [1] -1 -2 -3</code></pre>
<div class="sourceCode" id="cb473"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb473-1"><a href="organizing-code.html#cb473-1" aria-hidden="true" tabindex="-1"></a><span class="fu">get_largest</span>(z)</span></code></pre></div>
<pre><code>## [1] &quot;t&quot; &quot;l&quot; &quot;d&quot; &quot;b&quot; &quot;a&quot;</code></pre>
<div id="returning-values" class="section level3 hasAnchor" number="4.2.1">
<h3><span class="header-section-number">4.2.1</span> Returning Values<a href="organizing-code.html#returning-values" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>We’ve already seen that a function will automatically return the value of its
last line.</p>
<p>The <code>return</code> keyword causes a function to return a result immediately, without
running any subsequent code in its body. It only makes sense to use <code>return</code>
from inside of an if-statement. If your function doesn’t have any
if-statements, you don’t need to use <code>return</code>.</p>
<p>For example, suppose you want the <code>get_largest</code> function to immediately return
<code>NULL</code> if the argument for <code>vec</code> is a list. Here’s the code, along with some
test cases:</p>
<div class="sourceCode" id="cb475"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb475-1"><a href="organizing-code.html#cb475-1" aria-hidden="true" tabindex="-1"></a>get_largest <span class="ot">=</span> <span class="cf">function</span>(vec, <span class="at">n =</span> <span class="dv">5</span>) {</span>
<span id="cb475-2"><a href="organizing-code.html#cb475-2" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="fu">is.list</span>(vec))</span>
<span id="cb475-3"><a href="organizing-code.html#cb475-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(<span class="cn">NULL</span>)</span>
<span id="cb475-4"><a href="organizing-code.html#cb475-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb475-5"><a href="organizing-code.html#cb475-5" aria-hidden="true" tabindex="-1"></a>  sorted <span class="ot">=</span> <span class="fu">sort</span>(vec, <span class="at">decreasing =</span> <span class="cn">TRUE</span>)</span>
<span id="cb475-6"><a href="organizing-code.html#cb475-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>(sorted, n)</span>
<span id="cb475-7"><a href="organizing-code.html#cb475-7" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb475-8"><a href="organizing-code.html#cb475-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb475-9"><a href="organizing-code.html#cb475-9" aria-hidden="true" tabindex="-1"></a><span class="fu">get_largest</span>(x)</span></code></pre></div>
<pre><code>## [1] 20 10  1 -3</code></pre>
<div class="sourceCode" id="cb477"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb477-1"><a href="organizing-code.html#cb477-1" aria-hidden="true" tabindex="-1"></a><span class="fu">get_largest</span>(z)</span></code></pre></div>
<pre><code>## [1] &quot;t&quot; &quot;l&quot; &quot;d&quot; &quot;b&quot; &quot;a&quot;</code></pre>
<div class="sourceCode" id="cb479"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb479-1"><a href="organizing-code.html#cb479-1" aria-hidden="true" tabindex="-1"></a><span class="fu">get_largest</span>(<span class="fu">list</span>(<span class="dv">1</span>, <span class="dv">2</span>))</span></code></pre></div>
<pre><code>## NULL</code></pre>
<p>Alternatively, you could make the function raise an error by calling the <code>stop</code>
function. Whether it makes more sense to return <code>NULL</code> or print an error
depends on how you plan to use the <code>get_largest</code> function.</p>
<p>Notice that the last line of the <code>get_largest</code> function still doesn’t use the
<code>return</code> keyword. It’s idiomatic to only use <code>return</code> when strictly necessary.</p>
<p>A function returns one R object, but sometimes computations have multiple
results. In that case, return the results in a vector, list, or other data
structure.</p>
<p>For example, let’s make a function that computes the mean and median for a
vector. We’ll return the results in a named list, although we could also use a
named vector:</p>
<div class="sourceCode" id="cb481"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb481-1"><a href="organizing-code.html#cb481-1" aria-hidden="true" tabindex="-1"></a>compute_mean_med <span class="ot">=</span> <span class="cf">function</span>(x) {</span>
<span id="cb481-2"><a href="organizing-code.html#cb481-2" aria-hidden="true" tabindex="-1"></a>  m1 <span class="ot">=</span> <span class="fu">mean</span>(x)</span>
<span id="cb481-3"><a href="organizing-code.html#cb481-3" aria-hidden="true" tabindex="-1"></a>  m2 <span class="ot">=</span> <span class="fu">median</span>(x)</span>
<span id="cb481-4"><a href="organizing-code.html#cb481-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">list</span>(<span class="at">mean =</span> m1, <span class="at">median =</span> m2)</span>
<span id="cb481-5"><a href="organizing-code.html#cb481-5" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb481-6"><a href="organizing-code.html#cb481-6" aria-hidden="true" tabindex="-1"></a><span class="fu">compute_mean_med</span>(<span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">1</span>))</span></code></pre></div>
<pre><code>## $mean
## [1] 1.75
## 
## $median
## [1] 1.5</code></pre>
<p>The names make the result easier to understand for the caller of the function,
although they certainly aren’t required here.</p>
</div>
<div id="planning-your-functions" class="section level3 hasAnchor" number="4.2.2">
<h3><span class="header-section-number">4.2.2</span> Planning Your Functions<a href="organizing-code.html#planning-your-functions" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Before you write a function, it’s useful to go through several steps:</p>
<ol style="list-style-type: decimal">
<li><p>Write down what you want to do, in detail. It can also help to
draw a picture of what needs to happen.</p></li>
<li><p>Check whether there’s already a built-in function. Search online and in the
R documentation.</p></li>
<li><p>Write the code to handle a simple case first. For data science
problems, use a small dataset at this step.</p></li>
</ol>
<p>Let’s apply this in one final example: a function that detects leap years. A
year is a leap year if either of these conditions is true:</p>
<ul>
<li>It is divisible by 4 and not 100</li>
<li>It is divisible by 400</li>
</ul>
<p>That means the years 2004 and 2000 are leap years, but the year 2200 is not.
Here’s the code and a few test cases:</p>
<div class="sourceCode" id="cb483"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb483-1"><a href="organizing-code.html#cb483-1" aria-hidden="true" tabindex="-1"></a><span class="co"># If year is divisible by 4 and not 100 -&gt; leap</span></span>
<span id="cb483-2"><a href="organizing-code.html#cb483-2" aria-hidden="true" tabindex="-1"></a><span class="co"># If year is divisible by 400 -&gt; leap</span></span>
<span id="cb483-3"><a href="organizing-code.html#cb483-3" aria-hidden="true" tabindex="-1"></a>year <span class="ot">=</span> <span class="dv">2004</span></span>
<span id="cb483-4"><a href="organizing-code.html#cb483-4" aria-hidden="true" tabindex="-1"></a>is_leap <span class="ot">=</span> <span class="cf">function</span>(year) {</span>
<span id="cb483-5"><a href="organizing-code.html#cb483-5" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (year <span class="sc">%%</span> <span class="dv">4</span> <span class="sc">==</span> <span class="dv">0</span> <span class="sc">&amp;</span> year <span class="sc">%%</span> <span class="dv">100</span> <span class="sc">!=</span> <span class="dv">0</span>) {</span>
<span id="cb483-6"><a href="organizing-code.html#cb483-6" aria-hidden="true" tabindex="-1"></a>    leap <span class="ot">=</span> <span class="cn">TRUE</span></span>
<span id="cb483-7"><a href="organizing-code.html#cb483-7" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> <span class="cf">if</span> (year <span class="sc">%%</span> <span class="dv">400</span> <span class="sc">==</span> <span class="dv">0</span>) {</span>
<span id="cb483-8"><a href="organizing-code.html#cb483-8" aria-hidden="true" tabindex="-1"></a>    leap <span class="ot">=</span> <span class="cn">TRUE</span></span>
<span id="cb483-9"><a href="organizing-code.html#cb483-9" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb483-10"><a href="organizing-code.html#cb483-10" aria-hidden="true" tabindex="-1"></a>    leap <span class="ot">=</span> <span class="cn">FALSE</span></span>
<span id="cb483-11"><a href="organizing-code.html#cb483-11" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb483-12"><a href="organizing-code.html#cb483-12" aria-hidden="true" tabindex="-1"></a>  leap</span>
<span id="cb483-13"><a href="organizing-code.html#cb483-13" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb483-14"><a href="organizing-code.html#cb483-14" aria-hidden="true" tabindex="-1"></a><span class="fu">is_leap</span>(<span class="dv">400</span>)</span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<div class="sourceCode" id="cb485"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb485-1"><a href="organizing-code.html#cb485-1" aria-hidden="true" tabindex="-1"></a><span class="fu">is_leap</span>(<span class="dv">1997</span>)</span></code></pre></div>
<pre><code>## [1] FALSE</code></pre>
<p>Functions are the building blocks for solving larger problems. Take a
divide-and-conquer approach, breaking large problems into smaller steps. Use a
short function for each step. This approach makes it easier to:</p>
<ul>
<li>Test that each step works correctly.</li>
<li>Modify, reuse, or repurpose a step.</li>
</ul>
</div>
</div>
<div id="exercises-3" class="section level2 hasAnchor" number="4.3">
<h2><span class="header-section-number">4.3</span> Exercises<a href="organizing-code.html#exercises-3" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><em>These exercises are meant to challenge you, so they’re quite difficult
compared to the previous ones. Don’t get disheartened, and if you’re able to
complete them, excellent work!</em></p>
<div id="exercise-10" class="section level3 hasAnchor" number="4.3.1">
<h3><span class="header-section-number">4.3.1</span> Exercise<a href="organizing-code.html#exercise-10" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Create a function <code>compute_day</code> which uses the <a href="https://en.wikipedia.org/wiki/Doomsday_rule">Doomsday algorithm</a>
to compute the day of week for any given date in the 1900s. The function’s
parameters should be <code>year</code>, <code>month</code>, and <code>day</code>. The function’s return value
should be a day of week, as a string (for example, <code>"Saturday"</code>).</p>
<p><em>Hint: the modulo operator is <code>%%</code> in R.</em></p>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="exploring-data.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="appendix.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": false,
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/ucdavisdatalab/workshop_r_basics/edit/master/04_automating-tasks.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": "https://github.com/ucdavisdatalab/workshop_r_basics/blob/master/04_automating-tasks.Rmd",
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "section"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
