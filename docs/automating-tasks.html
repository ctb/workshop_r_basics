<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>4 Automating Tasks | R Basics</title>
  <meta name="description" content="4 Automating Tasks | R Basics" />
  <meta name="generator" content="bookdown 0.21 and GitBook 2.6.7" />

  <meta property="og:title" content="4 Automating Tasks | R Basics" />
  <meta property="og:type" content="book" />
  <meta property="og:url" content="https://ucdavisdatalab.github.io/workshop_r_basics/" />
  
  
  <meta name="github-repo" content="ucdavisdatalab/workshop_r-basics" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="4 Automating Tasks | R Basics" />
  
  
  

<meta name="author" content="Nick Ulle" />


<meta name="date" content="2022-09-12" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="exploring-data.html"/>
<link rel="next" href="appendix.html"/>
<script src="libs/header-attrs-2.10/header-attrs.js"></script>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="https://datalab.ucdavis.edu/">
  <img src="https://datalab.ucdavis.edu/wp-content/uploads/2019/07/datalab-logo-full-color-rgb-1.png" style="height: 100%; width: 100%; object-fit: contain" />
</a></li>
<li><a href="./" style="font-size: 18px">R Basics</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Overview</a></li>
<li class="chapter" data-level="1" data-path="getting-started.html"><a href="getting-started.html"><i class="fa fa-check"></i><b>1</b> Getting Started</a>
<ul>
<li class="chapter" data-level="1.1" data-path="getting-started.html"><a href="getting-started.html#prerequisites"><i class="fa fa-check"></i><b>1.1</b> Prerequisites</a></li>
<li class="chapter" data-level="1.2" data-path="getting-started.html"><a href="getting-started.html#the-r-interface"><i class="fa fa-check"></i><b>1.2</b> The R Interface</a>
<ul>
<li class="chapter" data-level="1.2.1" data-path="getting-started.html"><a href="getting-started.html#variables"><i class="fa fa-check"></i><b>1.2.1</b> Variables</a></li>
<li class="chapter" data-level="1.2.2" data-path="getting-started.html"><a href="getting-started.html#strings"><i class="fa fa-check"></i><b>1.2.2</b> Strings</a></li>
<li class="chapter" data-level="1.2.3" data-path="getting-started.html"><a href="getting-started.html#comparisons"><i class="fa fa-check"></i><b>1.2.3</b> Comparisons</a></li>
<li class="chapter" data-level="1.2.4" data-path="getting-started.html"><a href="getting-started.html#calling-functions"><i class="fa fa-check"></i><b>1.2.4</b> Calling Functions</a></li>
</ul></li>
<li class="chapter" data-level="1.3" data-path="getting-started.html"><a href="getting-started.html#getting-help"><i class="fa fa-check"></i><b>1.3</b> Getting Help</a>
<ul>
<li class="chapter" data-level="1.3.1" data-path="getting-started.html"><a href="getting-started.html#when-something-goes-wrong"><i class="fa fa-check"></i><b>1.3.1</b> When Something Goes Wrong</a></li>
</ul></li>
<li class="chapter" data-level="1.4" data-path="getting-started.html"><a href="getting-started.html#file-systems"><i class="fa fa-check"></i><b>1.4</b> File Systems</a>
<ul>
<li class="chapter" data-level="1.4.1" data-path="getting-started.html"><a href="getting-started.html#absolute-relative-paths"><i class="fa fa-check"></i><b>1.4.1</b> Absolute &amp; Relative Paths</a></li>
<li class="chapter" data-level="1.4.2" data-path="getting-started.html"><a href="getting-started.html#r-scripts"><i class="fa fa-check"></i><b>1.4.2</b> R Scripts</a></li>
<li class="chapter" data-level="1.4.3" data-path="getting-started.html"><a href="getting-started.html#the-working-directory"><i class="fa fa-check"></i><b>1.4.3</b> The Working Directory</a></li>
</ul></li>
<li class="chapter" data-level="1.5" data-path="getting-started.html"><a href="getting-started.html#reading-files"><i class="fa fa-check"></i><b>1.5</b> Reading Files</a>
<ul>
<li class="chapter" data-level="1.5.1" data-path="getting-started.html"><a href="getting-started.html#hello-data"><i class="fa fa-check"></i><b>1.5.1</b> Hello, Data!</a></li>
</ul></li>
<li class="chapter" data-level="1.6" data-path="getting-started.html"><a href="getting-started.html#data-frames"><i class="fa fa-check"></i><b>1.6</b> Data Frames</a>
<ul>
<li class="chapter" data-level="1.6.1" data-path="getting-started.html"><a href="getting-started.html#summarizing-data"><i class="fa fa-check"></i><b>1.6.1</b> Summarizing Data</a></li>
<li class="chapter" data-level="1.6.2" data-path="getting-started.html"><a href="getting-started.html#selecting-columns"><i class="fa fa-check"></i><b>1.6.2</b> Selecting Columns</a></li>
</ul></li>
<li class="chapter" data-level="1.7" data-path="getting-started.html"><a href="getting-started.html#exercises"><i class="fa fa-check"></i><b>1.7</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="data-structures.html"><a href="data-structures.html"><i class="fa fa-check"></i><b>2</b> Data Structures</a>
<ul>
<li class="chapter" data-level="2.1" data-path="data-structures.html"><a href="data-structures.html#vectors"><i class="fa fa-check"></i><b>2.1</b> Vectors</a>
<ul>
<li class="chapter" data-level="2.1.1" data-path="data-structures.html"><a href="data-structures.html#creating-vectors"><i class="fa fa-check"></i><b>2.1.1</b> Creating Vectors</a></li>
<li class="chapter" data-level="2.1.2" data-path="data-structures.html"><a href="data-structures.html#indexing-vectors"><i class="fa fa-check"></i><b>2.1.2</b> Indexing Vectors</a></li>
<li class="chapter" data-level="2.1.3" data-path="data-structures.html"><a href="data-structures.html#vectorization"><i class="fa fa-check"></i><b>2.1.3</b> Vectorization</a></li>
<li class="chapter" data-level="2.1.4" data-path="data-structures.html"><a href="data-structures.html#recycling"><i class="fa fa-check"></i><b>2.1.4</b> Recycling</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="data-structures.html"><a href="data-structures.html#data-types-classes"><i class="fa fa-check"></i><b>2.2</b> Data Types &amp; Classes</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="data-structures.html"><a href="data-structures.html#lists"><i class="fa fa-check"></i><b>2.2.1</b> Lists</a></li>
<li class="chapter" data-level="2.2.2" data-path="data-structures.html"><a href="data-structures.html#implicit-coercion"><i class="fa fa-check"></i><b>2.2.2</b> Implicit Coercion</a></li>
<li class="chapter" data-level="2.2.3" data-path="data-structures.html"><a href="data-structures.html#matrices-arrays"><i class="fa fa-check"></i><b>2.2.3</b> Matrices &amp; Arrays</a></li>
<li class="chapter" data-level="2.2.4" data-path="data-structures.html"><a href="data-structures.html#factors"><i class="fa fa-check"></i><b>2.2.4</b> Factors</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="data-structures.html"><a href="data-structures.html#special-values"><i class="fa fa-check"></i><b>2.3</b> Special Values</a>
<ul>
<li class="chapter" data-level="2.3.1" data-path="data-structures.html"><a href="data-structures.html#missing-values"><i class="fa fa-check"></i><b>2.3.1</b> Missing Values</a></li>
<li class="chapter" data-level="2.3.2" data-path="data-structures.html"><a href="data-structures.html#infinity"><i class="fa fa-check"></i><b>2.3.2</b> Infinity</a></li>
<li class="chapter" data-level="2.3.3" data-path="data-structures.html"><a href="data-structures.html#not-a-number"><i class="fa fa-check"></i><b>2.3.3</b> Not a Number</a></li>
<li class="chapter" data-level="2.3.4" data-path="data-structures.html"><a href="data-structures.html#null"><i class="fa fa-check"></i><b>2.3.4</b> Null</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="data-structures.html"><a href="data-structures.html#indexing"><i class="fa fa-check"></i><b>2.4</b> Indexing</a>
<ul>
<li class="chapter" data-level="2.4.1" data-path="data-structures.html"><a href="data-structures.html#all-elements"><i class="fa fa-check"></i><b>2.4.1</b> All Elements</a></li>
<li class="chapter" data-level="2.4.2" data-path="data-structures.html"><a href="data-structures.html#by-position"><i class="fa fa-check"></i><b>2.4.2</b> By Position</a></li>
<li class="chapter" data-level="2.4.3" data-path="data-structures.html"><a href="data-structures.html#by-name"><i class="fa fa-check"></i><b>2.4.3</b> By Name</a></li>
<li class="chapter" data-level="2.4.4" data-path="data-structures.html"><a href="data-structures.html#by-condition"><i class="fa fa-check"></i><b>2.4.4</b> By Condition</a></li>
<li class="chapter" data-level="2.4.5" data-path="data-structures.html"><a href="data-structures.html#logic"><i class="fa fa-check"></i><b>2.4.5</b> Logic</a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="data-structures.html"><a href="data-structures.html#exercises-1"><i class="fa fa-check"></i><b>2.5</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="exploring-data.html"><a href="exploring-data.html"><i class="fa fa-check"></i><b>3</b> Exploring Data</a>
<ul>
<li class="chapter" data-level="3.1" data-path="exploring-data.html"><a href="exploring-data.html#indexing-data-frames"><i class="fa fa-check"></i><b>3.1</b> Indexing Data Frames</a>
<ul>
<li class="chapter" data-level="3.1.1" data-path="exploring-data.html"><a href="exploring-data.html#indexing-lists"><i class="fa fa-check"></i><b>3.1.1</b> Indexing Lists</a></li>
<li class="chapter" data-level="3.1.2" data-path="exploring-data.html"><a href="exploring-data.html#two-dimensional-indexing"><i class="fa fa-check"></i><b>3.1.2</b> Two-dimensional Indexing</a></li>
<li class="chapter" data-level="3.1.3" data-path="exploring-data.html"><a href="exploring-data.html#the-drop-parameter"><i class="fa fa-check"></i><b>3.1.3</b> The <code>drop</code> Parameter</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="exploring-data.html"><a href="exploring-data.html#packages"><i class="fa fa-check"></i><b>3.2</b> Packages</a></li>
<li class="chapter" data-level="3.3" data-path="exploring-data.html"><a href="exploring-data.html#data-visualization"><i class="fa fa-check"></i><b>3.3</b> Data Visualization</a>
<ul>
<li class="chapter" data-level="3.3.1" data-path="exploring-data.html"><a href="exploring-data.html#layer-1-data"><i class="fa fa-check"></i><b>3.3.1</b> Layer 1: Data</a></li>
<li class="chapter" data-level="3.3.2" data-path="exploring-data.html"><a href="exploring-data.html#layer-2-geometry"><i class="fa fa-check"></i><b>3.3.2</b> Layer 2: Geometry</a></li>
<li class="chapter" data-level="3.3.3" data-path="exploring-data.html"><a href="exploring-data.html#layer-3-aesthetics"><i class="fa fa-check"></i><b>3.3.3</b> Layer 3: Aesthetics</a></li>
<li class="chapter" data-level="3.3.4" data-path="exploring-data.html"><a href="exploring-data.html#layer-4-scales"><i class="fa fa-check"></i><b>3.3.4</b> Layer 4: Scales</a></li>
<li class="chapter" data-level="3.3.5" data-path="exploring-data.html"><a href="exploring-data.html#saving-plots"><i class="fa fa-check"></i><b>3.3.5</b> Saving Plots</a></li>
<li class="chapter" data-level="3.3.6" data-path="exploring-data.html"><a href="exploring-data.html#example-bar-plot"><i class="fa fa-check"></i><b>3.3.6</b> Example: Bar Plot</a></li>
<li class="chapter" data-level="3.3.7" data-path="exploring-data.html"><a href="exploring-data.html#visualization-design"><i class="fa fa-check"></i><b>3.3.7</b> Visualization Design</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="exploring-data.html"><a href="exploring-data.html#apply-functions"><i class="fa fa-check"></i><b>3.4</b> Apply Functions</a>
<ul>
<li class="chapter" data-level="3.4.1" data-path="exploring-data.html"><a href="exploring-data.html#the-sapply-function"><i class="fa fa-check"></i><b>3.4.1</b> The <code>sapply</code> Function</a></li>
<li class="chapter" data-level="3.4.2" data-path="exploring-data.html"><a href="exploring-data.html#the-split-apply-pattern"><i class="fa fa-check"></i><b>3.4.2</b> The Split-Apply Pattern</a></li>
</ul></li>
<li class="chapter" data-level="3.5" data-path="exploring-data.html"><a href="exploring-data.html#exercises-2"><i class="fa fa-check"></i><b>3.5</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="automating-tasks.html"><a href="automating-tasks.html"><i class="fa fa-check"></i><b>4</b> Automating Tasks</a>
<ul>
<li class="chapter" data-level="4.1" data-path="automating-tasks.html"><a href="automating-tasks.html#conditional-expressions"><i class="fa fa-check"></i><b>4.1</b> Conditional Expressions</a></li>
<li class="chapter" data-level="4.2" data-path="automating-tasks.html"><a href="automating-tasks.html#functions"><i class="fa fa-check"></i><b>4.2</b> Functions</a>
<ul>
<li class="chapter" data-level="4.2.1" data-path="automating-tasks.html"><a href="automating-tasks.html#returning-values"><i class="fa fa-check"></i><b>4.2.1</b> Returning Values</a></li>
<li class="chapter" data-level="4.2.2" data-path="automating-tasks.html"><a href="automating-tasks.html#planning-your-functions"><i class="fa fa-check"></i><b>4.2.2</b> Planning Your Functions</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="automating-tasks.html"><a href="automating-tasks.html#loops"><i class="fa fa-check"></i><b>4.3</b> Loops</a>
<ul>
<li class="chapter" data-level="4.3.1" data-path="automating-tasks.html"><a href="automating-tasks.html#for-loops"><i class="fa fa-check"></i><b>4.3.1</b> For-loops</a></li>
<li class="chapter" data-level="4.3.2" data-path="automating-tasks.html"><a href="automating-tasks.html#while-loops"><i class="fa fa-check"></i><b>4.3.2</b> While-loops</a></li>
<li class="chapter" data-level="4.3.3" data-path="automating-tasks.html"><a href="automating-tasks.html#saving-multiple-results"><i class="fa fa-check"></i><b>4.3.3</b> Saving Multiple Results</a></li>
<li class="chapter" data-level="4.3.4" data-path="automating-tasks.html"><a href="automating-tasks.html#break-next"><i class="fa fa-check"></i><b>4.3.4</b> Break &amp; Next</a></li>
<li class="chapter" data-level="4.3.5" data-path="automating-tasks.html"><a href="automating-tasks.html#example-fibonacci"><i class="fa fa-check"></i><b>4.3.5</b> Example: Fibonacci</a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="automating-tasks.html"><a href="automating-tasks.html#planning-for-iteration"><i class="fa fa-check"></i><b>4.4</b> Planning for Iteration</a></li>
<li class="chapter" data-level="4.5" data-path="automating-tasks.html"><a href="automating-tasks.html#exercises-3"><i class="fa fa-check"></i><b>4.5</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="appendix.html"><a href="appendix.html"><i class="fa fa-check"></i><b>5</b> Appendix</a>
<ul>
<li class="chapter" data-level="5.1" data-path="appendix.html"><a href="appendix.html#more-ways-to-compare-values"><i class="fa fa-check"></i><b>5.1</b> More Ways to Compare Values</a></li>
<li class="chapter" data-level="5.2" data-path="appendix.html"><a href="appendix.html#variable-scope-lookup"><i class="fa fa-check"></i><b>5.2</b> Variable Scope &amp; Lookup</a>
<ul>
<li class="chapter" data-level="5.2.1" data-path="appendix.html"><a href="appendix.html#local-variables"><i class="fa fa-check"></i><b>5.2.1</b> Local Variables</a></li>
<li class="chapter" data-level="5.2.2" data-path="appendix.html"><a href="appendix.html#lexical-scoping"><i class="fa fa-check"></i><b>5.2.2</b> Lexical Scoping</a></li>
<li class="chapter" data-level="5.2.3" data-path="appendix.html"><a href="appendix.html#dynamic-lookup"><i class="fa fa-check"></i><b>5.2.3</b> Dynamic Lookup</a></li>
<li class="chapter" data-level="5.2.4" data-path="appendix.html"><a href="appendix.html#summary"><i class="fa fa-check"></i><b>5.2.4</b> Summary</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="appendix.html"><a href="appendix.html#string-processing"><i class="fa fa-check"></i><b>5.3</b> String Processing</a>
<ul>
<li class="chapter" data-level="5.3.1" data-path="appendix.html"><a href="appendix.html#splitting-strings"><i class="fa fa-check"></i><b>5.3.1</b> Splitting Strings</a></li>
<li class="chapter" data-level="5.3.2" data-path="appendix.html"><a href="appendix.html#replacing-parts-of-strings"><i class="fa fa-check"></i><b>5.3.2</b> Replacing Parts of Strings</a></li>
</ul></li>
<li class="chapter" data-level="5.4" data-path="appendix.html"><a href="appendix.html#date-processing"><i class="fa fa-check"></i><b>5.4</b> Date Processing</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="where-to-learn-more.html"><a href="where-to-learn-more.html"><i class="fa fa-check"></i>Where to Learn More</a></li>
<li class="chapter" data-level="" data-path="acknowledgements.html"><a href="acknowledgements.html"><i class="fa fa-check"></i>Acknowledgements</a></li>
<li class="chapter" data-level="" data-path="assessment.html"><a href="assessment.html"><i class="fa fa-check"></i>Assessment</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">R Basics</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="automating-tasks" class="section level1" number="4">
<h1><span class="header-section-number">4</span> Automating Tasks</h1>
<p>By now, we’ve learned all of the basic skills necessary to explore a data set
in R. This final chapter is a collection of different topics relevant to
cleaning data sets before and during analysis. Some of them, like loops, also
have other applications.</p>
<div id="conditional-expressions" class="section level2" number="4.1">
<h2><span class="header-section-number">4.1</span> Conditional Expressions</h2>
<p>Sometimes you’ll need code to do different things, depending on a condition.
<em>If-statements</em> provide a way to write conditional code.</p>
<p>For example, suppose we want to greet one person differently from the others:</p>
<div class="sourceCode" id="cb426"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb426-1"><a href="automating-tasks.html#cb426-1" aria-hidden="true" tabindex="-1"></a>name <span class="ot">=</span> <span class="st">&quot;Nick&quot;</span></span>
<span id="cb426-2"><a href="automating-tasks.html#cb426-2" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (name <span class="sc">==</span> <span class="st">&quot;Nick&quot;</span>) {</span>
<span id="cb426-3"><a href="automating-tasks.html#cb426-3" aria-hidden="true" tabindex="-1"></a>   <span class="co"># If name is Nick:</span></span>
<span id="cb426-4"><a href="automating-tasks.html#cb426-4" aria-hidden="true" tabindex="-1"></a>   <span class="fu">message</span>(<span class="st">&quot;We went down the TRUE branch&quot;</span>)</span>
<span id="cb426-5"><a href="automating-tasks.html#cb426-5" aria-hidden="true" tabindex="-1"></a>   msg <span class="ot">=</span> <span class="st">&quot;Hi Nick, nice to see you again!&quot;</span></span>
<span id="cb426-6"><a href="automating-tasks.html#cb426-6" aria-hidden="true" tabindex="-1"></a>} <span class="cf">else</span> {</span>
<span id="cb426-7"><a href="automating-tasks.html#cb426-7" aria-hidden="true" tabindex="-1"></a>   <span class="co"># Anything else:</span></span>
<span id="cb426-8"><a href="automating-tasks.html#cb426-8" aria-hidden="true" tabindex="-1"></a>   msg <span class="ot">=</span> <span class="st">&quot;Nice to meet you!&quot;</span></span>
<span id="cb426-9"><a href="automating-tasks.html#cb426-9" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<pre><code>## We went down the TRUE branch</code></pre>
<p>Indent code inside of the if-statement by 2 or 4 spaces. Indentation makes your
code easier to read.</p>
<p>The condition in an if-statement has to be a scalar:</p>
<div class="sourceCode" id="cb428"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb428-1"><a href="automating-tasks.html#cb428-1" aria-hidden="true" tabindex="-1"></a>name <span class="ot">=</span> <span class="fu">c</span>(<span class="st">&quot;Nick&quot;</span>, <span class="st">&quot;Susan&quot;</span>)</span>
<span id="cb428-2"><a href="automating-tasks.html#cb428-2" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (name <span class="sc">==</span> <span class="st">&quot;Nick&quot;</span>) {</span>
<span id="cb428-3"><a href="automating-tasks.html#cb428-3" aria-hidden="true" tabindex="-1"></a>   msg <span class="ot">=</span> <span class="st">&quot;Hi Nick!&quot;</span></span>
<span id="cb428-4"><a href="automating-tasks.html#cb428-4" aria-hidden="true" tabindex="-1"></a>} <span class="cf">else</span> {</span>
<span id="cb428-5"><a href="automating-tasks.html#cb428-5" aria-hidden="true" tabindex="-1"></a>   msg <span class="ot">=</span> <span class="st">&quot;Nice to meet you!&quot;</span></span>
<span id="cb428-6"><a href="automating-tasks.html#cb428-6" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<pre><code>## Error in if (name == &quot;Nick&quot;) {: the condition has length &gt; 1</code></pre>
<p>You can chain together if-statements:</p>
<div class="sourceCode" id="cb430"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb430-1"><a href="automating-tasks.html#cb430-1" aria-hidden="true" tabindex="-1"></a>name <span class="ot">=</span> <span class="st">&quot;Susan&quot;</span></span>
<span id="cb430-2"><a href="automating-tasks.html#cb430-2" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (name <span class="sc">==</span> <span class="st">&quot;Nick&quot;</span>) {</span>
<span id="cb430-3"><a href="automating-tasks.html#cb430-3" aria-hidden="true" tabindex="-1"></a>   msg <span class="ot">=</span> <span class="st">&quot;Hi Nick, nice to see you again!&quot;</span></span>
<span id="cb430-4"><a href="automating-tasks.html#cb430-4" aria-hidden="true" tabindex="-1"></a>} <span class="cf">else</span> <span class="cf">if</span> (name <span class="sc">==</span> <span class="st">&quot;Peter&quot;</span>) {</span>
<span id="cb430-5"><a href="automating-tasks.html#cb430-5" aria-hidden="true" tabindex="-1"></a>   msg <span class="ot">=</span> <span class="st">&quot;Go away Peter, I&#39;m busy!&quot;</span></span>
<span id="cb430-6"><a href="automating-tasks.html#cb430-6" aria-hidden="true" tabindex="-1"></a>} <span class="cf">else</span> {</span>
<span id="cb430-7"><a href="automating-tasks.html#cb430-7" aria-hidden="true" tabindex="-1"></a>   msg <span class="ot">=</span> <span class="st">&quot;Nice to meet you!&quot;</span></span>
<span id="cb430-8"><a href="automating-tasks.html#cb430-8" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb430-9"><a href="automating-tasks.html#cb430-9" aria-hidden="true" tabindex="-1"></a>msg</span></code></pre></div>
<pre><code>## [1] &quot;Nice to meet you!&quot;</code></pre>
<p>If-statements return the value of the last expression in the evaluated block:</p>
<div class="sourceCode" id="cb432"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb432-1"><a href="automating-tasks.html#cb432-1" aria-hidden="true" tabindex="-1"></a>name <span class="ot">=</span> <span class="st">&quot;Tom&quot;</span></span>
<span id="cb432-2"><a href="automating-tasks.html#cb432-2" aria-hidden="true" tabindex="-1"></a>msg <span class="ot">=</span> <span class="cf">if</span> (name <span class="sc">==</span> <span class="st">&quot;Nick&quot;</span>) {</span>
<span id="cb432-3"><a href="automating-tasks.html#cb432-3" aria-hidden="true" tabindex="-1"></a>   <span class="st">&quot;Hi Nick, nice to see you again!&quot;</span></span>
<span id="cb432-4"><a href="automating-tasks.html#cb432-4" aria-hidden="true" tabindex="-1"></a>} <span class="cf">else</span> {</span>
<span id="cb432-5"><a href="automating-tasks.html#cb432-5" aria-hidden="true" tabindex="-1"></a>   <span class="st">&quot;Nice to meet you!&quot;</span></span>
<span id="cb432-6"><a href="automating-tasks.html#cb432-6" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb432-7"><a href="automating-tasks.html#cb432-7" aria-hidden="true" tabindex="-1"></a>msg</span></code></pre></div>
<pre><code>## [1] &quot;Nice to meet you!&quot;</code></pre>
<p>Curly braces <code>{ }</code> are optional for single-line expressions:</p>
<div class="sourceCode" id="cb434"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb434-1"><a href="automating-tasks.html#cb434-1" aria-hidden="true" tabindex="-1"></a>name <span class="ot">=</span> <span class="st">&quot;Nick&quot;</span></span>
<span id="cb434-2"><a href="automating-tasks.html#cb434-2" aria-hidden="true" tabindex="-1"></a>msg <span class="ot">=</span> <span class="cf">if</span> (name <span class="sc">==</span> <span class="st">&quot;Nick&quot;</span>) <span class="st">&quot;Hi Nick, nice to see you again!&quot;</span> <span class="cf">else</span></span>
<span id="cb434-3"><a href="automating-tasks.html#cb434-3" aria-hidden="true" tabindex="-1"></a>   <span class="st">&quot;Nice to meet you!&quot;</span></span>
<span id="cb434-4"><a href="automating-tasks.html#cb434-4" aria-hidden="true" tabindex="-1"></a>msg</span></code></pre></div>
<pre><code>## [1] &quot;Hi Nick, nice to see you again!&quot;</code></pre>
<p>But you have to be careful if you don’t use them:</p>
<div class="sourceCode" id="cb436"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb436-1"><a href="automating-tasks.html#cb436-1" aria-hidden="true" tabindex="-1"></a><span class="co"># NO GOOD:</span></span>
<span id="cb436-2"><a href="automating-tasks.html#cb436-2" aria-hidden="true" tabindex="-1"></a>msg <span class="ot">=</span> <span class="cf">if</span> (name <span class="sc">==</span> <span class="st">&quot;Nick&quot;</span>)</span>
<span id="cb436-3"><a href="automating-tasks.html#cb436-3" aria-hidden="true" tabindex="-1"></a>   <span class="st">&quot;Hi Nick, nice to see you again!&quot;</span></span>
<span id="cb436-4"><a href="automating-tasks.html#cb436-4" aria-hidden="true" tabindex="-1"></a><span class="cf">else</span></span>
<span id="cb436-5"><a href="automating-tasks.html#cb436-5" aria-hidden="true" tabindex="-1"></a>   <span class="st">&quot;Nice to meet you!&quot;</span></span></code></pre></div>
<pre><code>## Error: &lt;text&gt;:4:1: unexpected &#39;else&#39;
## 3:    &quot;Hi Nick, nice to see you again!&quot;
## 4: else
##    ^</code></pre>
<p>The <code>else</code> block is optional:</p>
<div class="sourceCode" id="cb438"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb438-1"><a href="automating-tasks.html#cb438-1" aria-hidden="true" tabindex="-1"></a>msg <span class="ot">=</span> <span class="st">&quot;Hi&quot;</span></span>
<span id="cb438-2"><a href="automating-tasks.html#cb438-2" aria-hidden="true" tabindex="-1"></a>name <span class="ot">=</span> <span class="st">&quot;Tom&quot;</span></span>
<span id="cb438-3"><a href="automating-tasks.html#cb438-3" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (name <span class="sc">==</span> <span class="st">&quot;Nick&quot;</span>)</span>
<span id="cb438-4"><a href="automating-tasks.html#cb438-4" aria-hidden="true" tabindex="-1"></a>   msg <span class="ot">=</span> <span class="st">&quot;Hi Nick, nice to see you again!&quot;</span></span>
<span id="cb438-5"><a href="automating-tasks.html#cb438-5" aria-hidden="true" tabindex="-1"></a>msg</span></code></pre></div>
<pre><code>## [1] &quot;Hi&quot;</code></pre>
<p>When there’s no <code>else</code> block, the value of the <code>else</code> block is <code>NULL</code>:</p>
<div class="sourceCode" id="cb440"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb440-1"><a href="automating-tasks.html#cb440-1" aria-hidden="true" tabindex="-1"></a>name <span class="ot">=</span> <span class="st">&quot;Tom&quot;</span></span>
<span id="cb440-2"><a href="automating-tasks.html#cb440-2" aria-hidden="true" tabindex="-1"></a>msg <span class="ot">=</span> <span class="cf">if</span> (name <span class="sc">==</span> <span class="st">&quot;Nick&quot;</span>)</span>
<span id="cb440-3"><a href="automating-tasks.html#cb440-3" aria-hidden="true" tabindex="-1"></a>   <span class="st">&quot;Hi Nick, nice to see you again!&quot;</span></span>
<span id="cb440-4"><a href="automating-tasks.html#cb440-4" aria-hidden="true" tabindex="-1"></a>msg</span></code></pre></div>
<pre><code>## NULL</code></pre>
</div>
<div id="functions" class="section level2" number="4.2">
<h2><span class="header-section-number">4.2</span> Functions</h2>
<p>The main way to interact with R is by calling functions, which was first
explained way back in Section <a href="getting-started.html#calling-functions">1.2.4</a>. Since then, you’ve
learned how to use many of R’s built-in functions. This section explains how
you can write your own functions.</p>
<p>To start, let’s briefly review what functions are, and some of the jargon
associated with them. It’s useful to think of functions as factories: raw
materials (inputs) go in, products (outputs) come out. We can also represent
this visually:</p>
<pre><code>         +-------+
-- in --&gt;|   f   |-- out --&gt;
         +-------+</code></pre>
<p>Programmers use several specific terms to describe the parts and usage of
functions:</p>
<ul>
<li><em>Parameters</em> are placeholder variables for inputs.
<ul>
<li><em>Arguments</em> are the actual values assigned to the parameters in a call.</li>
</ul></li>
<li>The <em>return value</em> is the output.</li>
<li>The <em>body</em> is the code inside.</li>
<li><em>Calling</em> a function means using a function to compute something.</li>
</ul>
<p>Almost every command in R is a function, even the arithmetic operators and the
parentheses! You can view the body of a function by typing its name without
trailing parentheses (in contrast to how you call functions). The body of a
function is usually surrounded by curly braces <code>{}</code>, although they’re optional
if the body only contains one line of code. Indenting code inside of curly
braces by 2-4 spaces also helps make it visually distinct from other code.</p>
<p>For example, let’s look at the body of the <code>append</code> function, which appends a
value to the end of a list or vector:</p>
<div class="sourceCode" id="cb443"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb443-1"><a href="automating-tasks.html#cb443-1" aria-hidden="true" tabindex="-1"></a>append</span></code></pre></div>
<pre><code>## function (x, values, after = length(x)) 
## {
##     lengx &lt;- length(x)
##     if (!after) 
##         c(values, x)
##     else if (after &gt;= lengx) 
##         c(x, values)
##     else c(x[1L:after], values, x[(after + 1L):lengx])
## }
## &lt;bytecode: 0x5633aa145a20&gt;
## &lt;environment: namespace:base&gt;</code></pre>
<p>Don’t worry if you can’t understand everything the <code>append</code> function’s code
does yet. It will make more sense later on, after you’ve written a few
functions of your own.</p>
<p>Many of R’s built-in functions are not entirely written in R code. You can spot
these by calls to the special <code>.Primitive</code> or <code>.Internal</code> functions in their
code.</p>
<p>For instance, the <code>sum</code> function is not written in R code:</p>
<div class="sourceCode" id="cb445"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb445-1"><a href="automating-tasks.html#cb445-1" aria-hidden="true" tabindex="-1"></a>sum</span></code></pre></div>
<pre><code>## function (..., na.rm = FALSE)  .Primitive(&quot;sum&quot;)</code></pre>
<p>The <code>function</code> keyword creates a new function. Here’s the syntax:</p>
<pre><code>function(parameter1, parameter2, ...) {
  # Your code goes here
  
  # The result goes here
}</code></pre>
<p>A function can have any number of parameters, and will automatically return the
value of the last line of its body.</p>
<p>A function is a value, and like any other value, if you want to reuse it, you
need to assign it to variable. Choosing descriptive variable names is a good
habit. For functions, that means choosing a name that describes what the
function does. It often makes sense to use verbs in function names.</p>
<p>Let’s create a function that detects negative numbers. It should take a vector
of numbers as input, compare them to zero, and then return the logical result
from the comparison as output. Here’s the code to do that:</p>
<div class="sourceCode" id="cb448"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb448-1"><a href="automating-tasks.html#cb448-1" aria-hidden="true" tabindex="-1"></a>is_negative <span class="ot">=</span> <span class="cf">function</span>(x) {</span>
<span id="cb448-2"><a href="automating-tasks.html#cb448-2" aria-hidden="true" tabindex="-1"></a>  x <span class="sc">&lt;</span> <span class="dv">0</span></span>
<span id="cb448-3"><a href="automating-tasks.html#cb448-3" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb448-4"><a href="automating-tasks.html#cb448-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb448-5"><a href="automating-tasks.html#cb448-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Since this is a one-line function, the curly braces are optional:</span></span>
<span id="cb448-6"><a href="automating-tasks.html#cb448-6" aria-hidden="true" tabindex="-1"></a>is_negative <span class="ot">=</span> <span class="cf">function</span>(x) x <span class="sc">&lt;</span> <span class="dv">0</span></span></code></pre></div>
<p>The name of the function, <code>is_negative</code>, describes what the function does and
includes a verb. The parameter <code>x</code> is the input. The return value is the result
of <code>x &lt; 0</code>, since we put that expression on the last line.</p>
<p>Any time you write a function, the first thing you should do afterwards is test
that it actually works. Let’s try the <code>is_negative</code> function on a few test
cases:</p>
<div class="sourceCode" id="cb449"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb449-1"><a href="automating-tasks.html#cb449-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">=</span> <span class="fu">c</span>(<span class="dv">5</span>, <span class="sc">-</span><span class="dv">1</span>, <span class="sc">-</span><span class="dv">2</span>, <span class="dv">0</span>, <span class="dv">3</span>)</span>
<span id="cb449-2"><a href="automating-tasks.html#cb449-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb449-3"><a href="automating-tasks.html#cb449-3" aria-hidden="true" tabindex="-1"></a><span class="fu">is_negative</span>(<span class="dv">6</span>)</span></code></pre></div>
<pre><code>## [1] FALSE</code></pre>
<div class="sourceCode" id="cb451"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb451-1"><a href="automating-tasks.html#cb451-1" aria-hidden="true" tabindex="-1"></a><span class="fu">is_negative</span>(<span class="sc">-</span><span class="fl">1.1</span>)</span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<div class="sourceCode" id="cb453"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb453-1"><a href="automating-tasks.html#cb453-1" aria-hidden="true" tabindex="-1"></a><span class="fu">is_negative</span>(x)</span></code></pre></div>
<pre><code>## [1] FALSE  TRUE  TRUE FALSE FALSE</code></pre>
<p>Notice that the parameter <code>x</code> inside the function is different from the
variable <code>x</code> we created outside the function. We’ll learn more about this in
Section <a href="appendix.html#variable-scope-lookup">5.2</a>, but for now just remember that parameters
and variables inside of a function are separate from variables outside of a
function.</p>
<p>A <em>default argument</em> is an argument assigned to a parameter if no argument is
assigned in the call to the function. You can use <code>=</code> to assign default
arguments to parameters when you define a function with the <code>function</code> keyword.</p>
<p>For example, let’s write a function that gets the largest values in a vector.
We’ll make the number of values to get a parameter, with a default argument of
<code>5</code>. Here’s the code and some test cases:</p>
<div class="sourceCode" id="cb455"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb455-1"><a href="automating-tasks.html#cb455-1" aria-hidden="true" tabindex="-1"></a>top <span class="ot">=</span> <span class="cf">function</span>(x, <span class="at">n =</span> <span class="dv">5</span>) {</span>
<span id="cb455-2"><a href="automating-tasks.html#cb455-2" aria-hidden="true" tabindex="-1"></a>  sorted <span class="ot">=</span> <span class="fu">sort</span>(x, <span class="at">decreasing =</span> <span class="cn">TRUE</span>)</span>
<span id="cb455-3"><a href="automating-tasks.html#cb455-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>(sorted, n)</span>
<span id="cb455-4"><a href="automating-tasks.html#cb455-4" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb455-5"><a href="automating-tasks.html#cb455-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb455-6"><a href="automating-tasks.html#cb455-6" aria-hidden="true" tabindex="-1"></a>y <span class="ot">=</span> <span class="fu">c</span>(<span class="sc">-</span><span class="dv">6</span>, <span class="dv">7</span>, <span class="dv">10</span>, <span class="dv">3</span>, <span class="dv">1</span>, <span class="dv">15</span>, <span class="sc">-</span><span class="dv">2</span>)</span>
<span id="cb455-7"><a href="automating-tasks.html#cb455-7" aria-hidden="true" tabindex="-1"></a><span class="fu">top</span>(y, <span class="dv">3</span>)</span></code></pre></div>
<pre><code>## [1] 15 10  7</code></pre>
<div class="sourceCode" id="cb457"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb457-1"><a href="automating-tasks.html#cb457-1" aria-hidden="true" tabindex="-1"></a><span class="fu">top</span>(y)</span></code></pre></div>
<pre><code>## [1] 15 10  7  3  1</code></pre>
<div id="returning-values" class="section level3" number="4.2.1">
<h3><span class="header-section-number">4.2.1</span> Returning Values</h3>
<p>We’ve already seen that a function will automatically return the value of its
last line.</p>
<p>The <code>return</code> keyword causes a function to return a result immediately, without
running any subsequent code in its body. It only makes sense to use <code>return</code>
from inside of an if-statement. If your function doesn’t have any
if-statements, you don’t need to use <code>return</code>.</p>
<p>For example, suppose we want the <code>is_negative</code> function to return <code>NA</code> if the
argument isn’t a number. This is an ideal case to use <code>return</code>, since we skip
the computation <code>x &lt; 0</code> when the argument isn’t a number. Here’s the new
version of the function, as well as a new test case:</p>
<div class="sourceCode" id="cb459"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb459-1"><a href="automating-tasks.html#cb459-1" aria-hidden="true" tabindex="-1"></a>is_negative <span class="ot">=</span> <span class="cf">function</span>(x) {</span>
<span id="cb459-2"><a href="automating-tasks.html#cb459-2" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="sc">!</span><span class="fu">is.numeric</span>(x))</span>
<span id="cb459-3"><a href="automating-tasks.html#cb459-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span> (<span class="cn">NA</span>)</span>
<span id="cb459-4"><a href="automating-tasks.html#cb459-4" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb459-5"><a href="automating-tasks.html#cb459-5" aria-hidden="true" tabindex="-1"></a>  <span class="co"># TRUE for negative numbers, FALSE otherwise</span></span>
<span id="cb459-6"><a href="automating-tasks.html#cb459-6" aria-hidden="true" tabindex="-1"></a>  x <span class="sc">&lt;</span> <span class="dv">0</span></span>
<span id="cb459-7"><a href="automating-tasks.html#cb459-7" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb459-8"><a href="automating-tasks.html#cb459-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb459-9"><a href="automating-tasks.html#cb459-9" aria-hidden="true" tabindex="-1"></a><span class="fu">is_negative</span>(<span class="st">&quot;hi&quot;</span>)</span></code></pre></div>
<pre><code>## [1] NA</code></pre>
<p>It’s idiomatic to only use <code>return</code> when strictly necessary.</p>
<p>A function returns one R object, but sometimes computations have multiple
results. In that case, return the results in a vector, list, or other data
structure.</p>
<p>For example, let’s make a function that computes the mean and median for a
vector. We’ll return the results in a named list, although we could also use a
named vector:</p>
<div class="sourceCode" id="cb461"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb461-1"><a href="automating-tasks.html#cb461-1" aria-hidden="true" tabindex="-1"></a>compute_mean_med <span class="ot">=</span> <span class="cf">function</span>(x) {</span>
<span id="cb461-2"><a href="automating-tasks.html#cb461-2" aria-hidden="true" tabindex="-1"></a>  m1 <span class="ot">=</span> <span class="fu">mean</span>(x)</span>
<span id="cb461-3"><a href="automating-tasks.html#cb461-3" aria-hidden="true" tabindex="-1"></a>  m2 <span class="ot">=</span> <span class="fu">median</span>(x)</span>
<span id="cb461-4"><a href="automating-tasks.html#cb461-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">list</span>(<span class="at">mean =</span> m1, <span class="at">median =</span> m2)</span>
<span id="cb461-5"><a href="automating-tasks.html#cb461-5" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb461-6"><a href="automating-tasks.html#cb461-6" aria-hidden="true" tabindex="-1"></a><span class="fu">compute_mean_med</span>(<span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">1</span>))</span></code></pre></div>
<pre><code>## $mean
## [1] 1.75
## 
## $median
## [1] 1.5</code></pre>
<p>The names make the result easier to understand for the caller of the function,
although they certainly aren’t required here.</p>
</div>
<div id="planning-your-functions" class="section level3" number="4.2.2">
<h3><span class="header-section-number">4.2.2</span> Planning Your Functions</h3>
<p>Before you write a function, it’s useful to go through several steps:</p>
<ol style="list-style-type: decimal">
<li><p>Write down what you want to do, in detail. It can also help to
draw a picture of what needs to happen.</p></li>
<li><p>Check whether there’s already a built-in function. Search online and in the
R documentation.</p></li>
<li><p>Write the code to handle a simple case first. For data science
problems, use a small dataset at this step.</p></li>
</ol>
<p>Let’s apply this in one final example: a function that detects leap years. A
year is a leap year if either of these conditions is true:</p>
<ul>
<li>It is divisible by 4 and not 100</li>
<li>It is divisible by 400</li>
</ul>
<p>That means the years 2004 and 2000 are leap years, but the year 2200 is not.
Here’s the code and a few test cases:</p>
<div class="sourceCode" id="cb463"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb463-1"><a href="automating-tasks.html#cb463-1" aria-hidden="true" tabindex="-1"></a><span class="co"># If year is divisible by 4 and not 100 -&gt; leap</span></span>
<span id="cb463-2"><a href="automating-tasks.html#cb463-2" aria-hidden="true" tabindex="-1"></a><span class="co"># If year is divisible by 400 -&gt; leap</span></span>
<span id="cb463-3"><a href="automating-tasks.html#cb463-3" aria-hidden="true" tabindex="-1"></a>year <span class="ot">=</span> <span class="dv">2004</span></span>
<span id="cb463-4"><a href="automating-tasks.html#cb463-4" aria-hidden="true" tabindex="-1"></a>is_leap <span class="ot">=</span> <span class="cf">function</span>(year) {</span>
<span id="cb463-5"><a href="automating-tasks.html#cb463-5" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (year <span class="sc">%%</span> <span class="dv">4</span> <span class="sc">==</span> <span class="dv">0</span> <span class="sc">&amp;</span> year <span class="sc">%%</span> <span class="dv">100</span> <span class="sc">!=</span> <span class="dv">0</span>) {</span>
<span id="cb463-6"><a href="automating-tasks.html#cb463-6" aria-hidden="true" tabindex="-1"></a>    leap <span class="ot">=</span> <span class="cn">TRUE</span></span>
<span id="cb463-7"><a href="automating-tasks.html#cb463-7" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> <span class="cf">if</span> (year <span class="sc">%%</span> <span class="dv">400</span> <span class="sc">==</span> <span class="dv">0</span>) {</span>
<span id="cb463-8"><a href="automating-tasks.html#cb463-8" aria-hidden="true" tabindex="-1"></a>    leap <span class="ot">=</span> <span class="cn">TRUE</span></span>
<span id="cb463-9"><a href="automating-tasks.html#cb463-9" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb463-10"><a href="automating-tasks.html#cb463-10" aria-hidden="true" tabindex="-1"></a>    leap <span class="ot">=</span> <span class="cn">FALSE</span></span>
<span id="cb463-11"><a href="automating-tasks.html#cb463-11" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb463-12"><a href="automating-tasks.html#cb463-12" aria-hidden="true" tabindex="-1"></a>  leap</span>
<span id="cb463-13"><a href="automating-tasks.html#cb463-13" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb463-14"><a href="automating-tasks.html#cb463-14" aria-hidden="true" tabindex="-1"></a><span class="fu">is_leap</span>(<span class="dv">400</span>)</span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<div class="sourceCode" id="cb465"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb465-1"><a href="automating-tasks.html#cb465-1" aria-hidden="true" tabindex="-1"></a><span class="fu">is_leap</span>(<span class="dv">1997</span>)</span></code></pre></div>
<pre><code>## [1] FALSE</code></pre>
<p>Functions are the building blocks for solving larger problems. Take a
divide-and-conquer approach, breaking large problems into smaller steps. Use a
short function for each step. This approach makes it easier to:</p>
<ul>
<li>Test that each step works correctly.</li>
<li>Modify, reuse, or repurpose a step.</li>
</ul>
</div>
</div>
<div id="loops" class="section level2" number="4.3">
<h2><span class="header-section-number">4.3</span> Loops</h2>
<p>One major benefit of using a programming language like R is that repetitive
tasks can be automated. We’ve already seen two ways to do this:</p>
<ol style="list-style-type: decimal">
<li><p>Vectorization, introduced in Section <a href="data-structures.html#vectorization">2.1.3</a></p></li>
<li><p>Apply functions, introduced in Section <a href="exploring-data.html#apply-functions">3.4</a></p></li>
</ol>
<p>Both of these are <em>iteration strategies</em>. They <em>iterate</em> over some object, and
compute something for each element. Each one of these computations is one
<em>iteration</em>. Vectorization is the most efficient iteration strategy, but only
works with vectorized functions and vectors. Apply functions are more
flexible—they work with any function and any data structure with
elements—but less efficient and less concise.</p>
<p>A <em>loop</em> is another iteration strategy, one that’s even more flexible than
apply functions. Besides being flexible, loops are a feature of almost all
modern programming languages, so it’s useful to understand them. In R, there
are two kinds of loops. We’ll learn both.</p>
<div id="for-loops" class="section level3" number="4.3.1">
<h3><span class="header-section-number">4.3.1</span> For-loops</h3>
<p>A <em>for-loop</em> runs a block of code once for each element of a vector or list.
The <code>for</code> keyword creates a for-loop. Here’s the syntax:</p>
<pre><code>for (I in DATA) {
  # Your code goes here
}</code></pre>
<p>The variable <code>I</code> is called the <em>induction variable</em>. At the beginning of each
iteration, <code>I</code> is assigned the next element of the vector or list <code>DATA</code>. The
loop iterates once for each element of <code>DATA</code>, unless you use a keyword to exit
the loop early (more about this in Section <a href="automating-tasks.html#break-next">4.3.4</a>). As with
if-statements and functions, the curly braces <code>{ }</code> are only required if the
body contains multiple lines of code.</p>
<p>Unlike the other iteration strategies, loops do not automatically return a
result. You have complete control over the output, which means that anything
you want to save must be assigned to a variable.</p>
<p>For example, let’s make a loop that repeatedly adds a number to a running total
and squares the new total. We’ll use a variable <code>total</code> to keep track of the
running total as the loop iterates:</p>
<div class="sourceCode" id="cb468"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb468-1"><a href="automating-tasks.html#cb468-1" aria-hidden="true" tabindex="-1"></a>numbers <span class="ot">=</span> <span class="fu">c</span>(<span class="sc">-</span><span class="dv">1</span>, <span class="dv">1</span>, <span class="sc">-</span><span class="dv">3</span>, <span class="dv">2</span>)</span>
<span id="cb468-2"><a href="automating-tasks.html#cb468-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb468-3"><a href="automating-tasks.html#cb468-3" aria-hidden="true" tabindex="-1"></a>total <span class="ot">=</span> <span class="dv">0</span></span>
<span id="cb468-4"><a href="automating-tasks.html#cb468-4" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (number <span class="cf">in</span> numbers) {</span>
<span id="cb468-5"><a href="automating-tasks.html#cb468-5" aria-hidden="true" tabindex="-1"></a>  total <span class="ot">=</span> (total <span class="sc">+</span> number)<span class="sc">^</span><span class="dv">2</span></span>
<span id="cb468-6"><a href="automating-tasks.html#cb468-6" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb468-7"><a href="automating-tasks.html#cb468-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb468-8"><a href="automating-tasks.html#cb468-8" aria-hidden="true" tabindex="-1"></a>total</span></code></pre></div>
<pre><code>## [1] 9</code></pre>
<p>Use for-loops when some or all of the iterations depend on results from other
iterations. If the iterations are not dependent, use one of:</p>
<ol style="list-style-type: decimal">
<li>Vectorization (because it’s faster)</li>
<li>Apply functions (because they’re idiomatic)</li>
</ol>
<p>In some cases, you can use vectorization even when the iterations are
dependent. For example, you can use vectorization to compute the sum of the
cubes of several numbers:</p>
<div class="sourceCode" id="cb470"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb470-1"><a href="automating-tasks.html#cb470-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(numbers<span class="sc">^</span><span class="dv">3</span>)</span></code></pre></div>
<pre><code>## [1] -19</code></pre>
</div>
<div id="while-loops" class="section level3" number="4.3.2">
<h3><span class="header-section-number">4.3.2</span> While-loops</h3>
<p>A <em>while-loop</em> runs a block of code repeatedly as long as some condition is
<code>TRUE</code>. The <code>while</code> keyword creates a while-loop. Here’s the syntax:</p>
<pre><code>while (CONDITION) {
  # Your code goes here
}</code></pre>
<p>The <code>CONDITION</code> should be a scalar logical value or an expression that returns
one. At the beginning of each iteration, <code>CONDITION</code> is checked, and the loop
exits if it is <code>FALSE</code>. As always, the curly braces <code>{ }</code> are only required if
the body contains multiple lines of code.</p>
<p>For example, suppose you want to add up numbers from 0 to 50, but stop as soon
as the total is greater than 50:</p>
<div class="sourceCode" id="cb473"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb473-1"><a href="automating-tasks.html#cb473-1" aria-hidden="true" tabindex="-1"></a>num50 <span class="ot">=</span> <span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">50</span>)</span>
<span id="cb473-2"><a href="automating-tasks.html#cb473-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb473-3"><a href="automating-tasks.html#cb473-3" aria-hidden="true" tabindex="-1"></a>total <span class="ot">=</span> <span class="dv">0</span></span>
<span id="cb473-4"><a href="automating-tasks.html#cb473-4" aria-hidden="true" tabindex="-1"></a>i <span class="ot">=</span> <span class="dv">1</span></span>
<span id="cb473-5"><a href="automating-tasks.html#cb473-5" aria-hidden="true" tabindex="-1"></a><span class="cf">while</span> (total <span class="sc">&lt;</span> <span class="dv">50</span>) {</span>
<span id="cb473-6"><a href="automating-tasks.html#cb473-6" aria-hidden="true" tabindex="-1"></a>  total <span class="ot">=</span> total <span class="sc">+</span> num50[i]</span>
<span id="cb473-7"><a href="automating-tasks.html#cb473-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">message</span>(<span class="st">&quot;i is &quot;</span>, i, <span class="st">&quot; total is &quot;</span>, total)</span>
<span id="cb473-8"><a href="automating-tasks.html#cb473-8" aria-hidden="true" tabindex="-1"></a>  i <span class="ot">=</span> i <span class="sc">+</span> <span class="dv">1</span></span>
<span id="cb473-9"><a href="automating-tasks.html#cb473-9" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<pre><code>## i is 1 total is 0</code></pre>
<pre><code>## i is 2 total is 1</code></pre>
<pre><code>## i is 3 total is 3</code></pre>
<pre><code>## i is 4 total is 6</code></pre>
<pre><code>## i is 5 total is 10</code></pre>
<pre><code>## i is 6 total is 15</code></pre>
<pre><code>## i is 7 total is 21</code></pre>
<pre><code>## i is 8 total is 28</code></pre>
<pre><code>## i is 9 total is 36</code></pre>
<pre><code>## i is 10 total is 45</code></pre>
<pre><code>## i is 11 total is 55</code></pre>
<div class="sourceCode" id="cb485"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb485-1"><a href="automating-tasks.html#cb485-1" aria-hidden="true" tabindex="-1"></a>total</span></code></pre></div>
<pre><code>## [1] 55</code></pre>
<div class="sourceCode" id="cb487"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb487-1"><a href="automating-tasks.html#cb487-1" aria-hidden="true" tabindex="-1"></a>i</span></code></pre></div>
<pre><code>## [1] 12</code></pre>
<p>While-loops are a generalization of for-loops. They tend to be most useful when
you don’t know how many iterations will be necessary. For example, suppose you
want to repeat a computation until the result falls within some range of
values.</p>
</div>
<div id="saving-multiple-results" class="section level3" number="4.3.3">
<h3><span class="header-section-number">4.3.3</span> Saving Multiple Results</h3>
<p>Loops often produce a different result for each iteration. If you want to save
more than one result, there are a few things you must do.</p>
<p>First, set up an index vector. The index vector should usually be congruent to
the number of iterations or the input. The <code>seq_along</code> function returns a
congruent index vector when passed a vector or list. For instance, let’s make
in index for the <code>numbers</code> vector from Section <a href="automating-tasks.html#for-loops">4.3.1</a>:</p>
<div class="sourceCode" id="cb489"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb489-1"><a href="automating-tasks.html#cb489-1" aria-hidden="true" tabindex="-1"></a>index <span class="ot">=</span> <span class="fu">seq_along</span>(numbers)</span></code></pre></div>
<p>The loop will iterate over the index rather than the input, so the induction
variable will track the current iteration number. On the first iteration, the
induction variable will be 1, on the second it will be 2, and so on. Then you
can use the induction variable and indexing to get the input for each
iteration.</p>
<p>Second, set up an empty output vector or list. This should usually be congruent
to the input, or one element longer (the extra element comes from the initial
value). R has several functions for creating vectors. We’ve already seen a few,
but here are more:</p>
<ul>
<li><p><code>logical</code>, <code>integer</code>, <code>numeric</code>, <code>complex</code>, and <code>character</code> to create an
empty vector with a specific type and length</p></li>
<li><p><code>vector</code> to create an empty vector with a specific type and length</p></li>
<li><p><code>rep</code> to create a vector by repeating elements of some other vector</p></li>
</ul>
<p>Empty vectors are filled with <code>FALSE</code>, <code>0</code>, or <code>""</code>, depending on the type of
the vector. Here are some examples:</p>
<div class="sourceCode" id="cb490"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb490-1"><a href="automating-tasks.html#cb490-1" aria-hidden="true" tabindex="-1"></a><span class="fu">logical</span>(<span class="dv">3</span>)</span></code></pre></div>
<pre><code>## [1] FALSE FALSE FALSE</code></pre>
<div class="sourceCode" id="cb492"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb492-1"><a href="automating-tasks.html#cb492-1" aria-hidden="true" tabindex="-1"></a><span class="fu">numeric</span>(<span class="dv">4</span>)</span></code></pre></div>
<pre><code>## [1] 0 0 0 0</code></pre>
<div class="sourceCode" id="cb494"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb494-1"><a href="automating-tasks.html#cb494-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rep</span>(<span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>), <span class="dv">2</span>)</span></code></pre></div>
<pre><code>## [1] 1 2 1 2</code></pre>
<p>Let’s create an empty numeric vector congruent to <code>numbers</code>:</p>
<div class="sourceCode" id="cb496"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb496-1"><a href="automating-tasks.html#cb496-1" aria-hidden="true" tabindex="-1"></a>n <span class="ot">=</span> <span class="fu">length</span>(numbers)</span>
<span id="cb496-2"><a href="automating-tasks.html#cb496-2" aria-hidden="true" tabindex="-1"></a>result <span class="ot">=</span> <span class="fu">numeric</span>(n)</span></code></pre></div>
<p>As with the input, you can use the induction variable and indexing to set the
output for each iteration.</p>
<p>Creating a vector or list in advance to store something, as we’ve just done, is
called <em>preallocation</em>. Preallocation is extremely important for efficiency in
loops. Avoid the temptation to use <code>c</code> or <code>append</code> to build up the output bit
by bit in each iteration.</p>
<p>Finally, write the loop, making sure to get the input and set the output.
Here’s the loop for the squared sums example:</p>
<div class="sourceCode" id="cb497"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb497-1"><a href="automating-tasks.html#cb497-1" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> index) {</span>
<span id="cb497-2"><a href="automating-tasks.html#cb497-2" aria-hidden="true" tabindex="-1"></a>  prev <span class="ot">=</span> <span class="cf">if</span> (i <span class="sc">&gt;</span> <span class="dv">1</span>) result[i <span class="sc">-</span> <span class="dv">1</span>] <span class="cf">else</span> <span class="dv">0</span></span>
<span id="cb497-3"><a href="automating-tasks.html#cb497-3" aria-hidden="true" tabindex="-1"></a>  result[i] <span class="ot">=</span> (numbers[i] <span class="sc">+</span> prev)<span class="sc">^</span><span class="dv">2</span></span>
<span id="cb497-4"><a href="automating-tasks.html#cb497-4" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb497-5"><a href="automating-tasks.html#cb497-5" aria-hidden="true" tabindex="-1"></a>result</span></code></pre></div>
<pre><code>## [1] 1 4 1 9</code></pre>
</div>
<div id="break-next" class="section level3" number="4.3.4">
<h3><span class="header-section-number">4.3.4</span> Break &amp; Next</h3>
<p>The <code>break</code> keyword causes a loop to immediately exit. It only makes sense to
use <code>break</code> inside of an if-statement.</p>
<p>For example, suppose we want to print each string in a vector, but stop at the
first missing value. We can do this with <code>break</code>:</p>
<div class="sourceCode" id="cb499"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb499-1"><a href="automating-tasks.html#cb499-1" aria-hidden="true" tabindex="-1"></a>my_messages <span class="ot">=</span> <span class="fu">c</span>(<span class="st">&quot;Hi&quot;</span>, <span class="st">&quot;Hello&quot;</span>, <span class="cn">NA</span>, <span class="st">&quot;Goodbye&quot;</span>)</span>
<span id="cb499-2"><a href="automating-tasks.html#cb499-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb499-3"><a href="automating-tasks.html#cb499-3" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (msg <span class="cf">in</span> my_messages) {</span>
<span id="cb499-4"><a href="automating-tasks.html#cb499-4" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="fu">is.na</span>(msg))</span>
<span id="cb499-5"><a href="automating-tasks.html#cb499-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">break</span></span>
<span id="cb499-6"><a href="automating-tasks.html#cb499-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb499-7"><a href="automating-tasks.html#cb499-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">message</span>(msg)</span>
<span id="cb499-8"><a href="automating-tasks.html#cb499-8" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<pre><code>## Hi</code></pre>
<pre><code>## Hello</code></pre>
<p>The <code>next</code> keyword causes a loop to immediately go to the next iteration. As
with <code>break</code>, it only makes sense to use <code>next</code> inside of an if-statement.</p>
<p>Let’s modify the previous example so that missing values are skipped, but don’t
cause printing to stop. Here’s the code:</p>
<div class="sourceCode" id="cb502"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb502-1"><a href="automating-tasks.html#cb502-1" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (msg <span class="cf">in</span> my_messages) {</span>
<span id="cb502-2"><a href="automating-tasks.html#cb502-2" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="fu">is.na</span>(msg))</span>
<span id="cb502-3"><a href="automating-tasks.html#cb502-3" aria-hidden="true" tabindex="-1"></a>    <span class="cf">next</span></span>
<span id="cb502-4"><a href="automating-tasks.html#cb502-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb502-5"><a href="automating-tasks.html#cb502-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">message</span>(msg)</span>
<span id="cb502-6"><a href="automating-tasks.html#cb502-6" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<pre><code>## Hi</code></pre>
<pre><code>## Hello</code></pre>
<pre><code>## Goodbye</code></pre>
<p>These keywords work with both for-loops and while-loops.</p>
</div>
<div id="example-fibonacci" class="section level3" number="4.3.5">
<h3><span class="header-section-number">4.3.5</span> Example: Fibonacci</h3>
<p>As a final example, let’s use a loop to compute Fibonacci numbers. Each
Fibonacci number is the sum of the previous two. The first few Fibonacci
numbers are:</p>
<pre><code>1 1 2 3 5 8 13</code></pre>
<p>We can use a loop to compute the first <code>n</code> Fibonacci numbers. Make sure to
choose an appropriate index and to preallocate for the output:</p>
<div class="sourceCode" id="cb507"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb507-1"><a href="automating-tasks.html#cb507-1" aria-hidden="true" tabindex="-1"></a>n <span class="ot">=</span> <span class="dv">10</span></span>
<span id="cb507-2"><a href="automating-tasks.html#cb507-2" aria-hidden="true" tabindex="-1"></a>fib <span class="ot">=</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">1</span>, <span class="fu">numeric</span>(n <span class="sc">-</span> <span class="dv">2</span>))</span>
<span id="cb507-3"><a href="automating-tasks.html#cb507-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb507-4"><a href="automating-tasks.html#cb507-4" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">3</span><span class="sc">:</span>n) {</span>
<span id="cb507-5"><a href="automating-tasks.html#cb507-5" aria-hidden="true" tabindex="-1"></a>  fib[i] <span class="ot">=</span> fib[i <span class="sc">-</span> <span class="dv">1</span>] <span class="sc">+</span> fib[i <span class="sc">-</span> <span class="dv">2</span>]</span>
<span id="cb507-6"><a href="automating-tasks.html#cb507-6" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb507-7"><a href="automating-tasks.html#cb507-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb507-8"><a href="automating-tasks.html#cb507-8" aria-hidden="true" tabindex="-1"></a>fib</span></code></pre></div>
<pre><code>##  [1]  1  1  2  3  5  8 13 21 34 55</code></pre>
<p>If you want to reuse this code, you could make it a function:</p>
<div class="sourceCode" id="cb509"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb509-1"><a href="automating-tasks.html#cb509-1" aria-hidden="true" tabindex="-1"></a>fibonacci <span class="ot">=</span> <span class="cf">function</span>(<span class="at">n =</span> <span class="dv">10</span>) {</span>
<span id="cb509-2"><a href="automating-tasks.html#cb509-2" aria-hidden="true" tabindex="-1"></a>  fib <span class="ot">=</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">1</span>, <span class="fu">numeric</span>(n <span class="sc">-</span> <span class="dv">2</span>))</span>
<span id="cb509-3"><a href="automating-tasks.html#cb509-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb509-4"><a href="automating-tasks.html#cb509-4" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">3</span><span class="sc">:</span>n) {</span>
<span id="cb509-5"><a href="automating-tasks.html#cb509-5" aria-hidden="true" tabindex="-1"></a>    fib[i] <span class="ot">=</span> fib[i <span class="sc">-</span> <span class="dv">1</span>] <span class="sc">+</span> fib[i <span class="sc">-</span> <span class="dv">2</span>]</span>
<span id="cb509-6"><a href="automating-tasks.html#cb509-6" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb509-7"><a href="automating-tasks.html#cb509-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb509-8"><a href="automating-tasks.html#cb509-8" aria-hidden="true" tabindex="-1"></a>  fib</span>
<span id="cb509-9"><a href="automating-tasks.html#cb509-9" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb509-10"><a href="automating-tasks.html#cb509-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb509-11"><a href="automating-tasks.html#cb509-11" aria-hidden="true" tabindex="-1"></a><span class="fu">fibonacci</span>(<span class="dv">30</span>)</span></code></pre></div>
<pre><code>##  [1]      1      1      2      3      5      8     13     21     34     55
## [11]     89    144    233    377    610    987   1597   2584   4181   6765
## [21]  10946  17711  28657  46368  75025 121393 196418 317811 514229 832040</code></pre>
</div>
</div>
<div id="planning-for-iteration" class="section level2" number="4.4">
<h2><span class="header-section-number">4.4</span> Planning for Iteration</h2>
<p>At first it may seem difficult to decide if and what kind of iteration to use.
Start by thinking about whether you need to do something over and over. If you
don’t, then you probably don’t need to use iteration. If you do, then try
iteration strategies in this order:</p>
<ol style="list-style-type: decimal">
<li>vectorization</li>
<li>apply functions
<ul>
<li>Try an apply function if iterations are independent.</li>
</ul></li>
<li>for/while-loops
<ul>
<li>Try a for-loop if some iterations depend on others.</li>
<li>Try a while-loop if the number of iterations is unknown.</li>
</ul></li>
<li>recursion (which isn’t covered here)
<ul>
<li>Convenient for naturally recursive problems (like Fibonacci),
but often there are faster solutions.</li>
</ul></li>
</ol>
<p>Start by writing the code for just one iteration. Make sure that code works;
it’s easy to test code for one iteration.</p>
<p>When you have one iteration working, then try using the code with an iteration
strategy (you will have to make some small changes). If it doesn’t work, try to
figure out which iteration is causing the problem. One way to do this is to use
<code>message</code> to print out information. Then try to write the code for the broken
iteration, get that iteration working, and repeat this whole process.</p>
</div>
<div id="exercises-3" class="section level2" number="4.5">
<h2><span class="header-section-number">4.5</span> Exercises</h2>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="exploring-data.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="appendix.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": false,
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/ucdavisdatalab/workshop_r_basics/edit/master/04_automating-tasks.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": "https://github.com/ucdavisdatalab/workshop_r_basics/blob/master/04_automating-tasks.Rmd",
"text": null
},
"download": null,
"toc": {
"collapse": "section"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
